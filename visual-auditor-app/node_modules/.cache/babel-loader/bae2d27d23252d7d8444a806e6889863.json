{"ast":null,"code":"import defaultSource from \"./defaultSource.js\";\nimport beta from \"./beta.js\";\nimport geometric from \"./geometric.js\";\nexport default (function sourceRandomBinomial(source) {\n  var G = geometric.source(source),\n      B = beta.source(source);\n\n  function randomBinomial(n, p) {\n    n = +n;\n    if ((p = +p) >= 1) return function () {\n      return n;\n    };\n    if (p <= 0) return function () {\n      return 0;\n    };\n    return function () {\n      var acc = 0,\n          nn = n,\n          pp = p;\n\n      while (nn * pp > 16 && nn * (1 - pp) > 16) {\n        var i = Math.floor((nn + 1) * pp),\n            y = B(i, nn - i + 1)();\n\n        if (y <= pp) {\n          acc += i;\n          nn -= i;\n          pp = (pp - y) / (1 - y);\n        } else {\n          nn = i - 1;\n          pp /= y;\n        }\n      }\n\n      var sign = pp < 0.5,\n          pFinal = sign ? pp : 1 - pp,\n          g = G(pFinal);\n\n      for (var s = g(), k = 0; s <= nn; ++k) {\n        s += g();\n      }\n\n      return acc + (sign ? k : nn - k);\n    };\n  }\n\n  randomBinomial.source = sourceRandomBinomial;\n  return randomBinomial;\n})(defaultSource);","map":{"version":3,"sources":["/Users/davidmunechika/Documents/Code/Research/visual-auditor/visual-auditor-app/node_modules/d3-random/src/binomial.js"],"names":["defaultSource","beta","geometric","sourceRandomBinomial","source","G","B","randomBinomial","n","p","acc","nn","pp","i","Math","floor","y","sign","pFinal","g","s","k"],"mappings":"AAAA,OAAOA,aAAP,MAA0B,oBAA1B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AAEA,eAAe,CAAC,SAASC,oBAAT,CAA8BC,MAA9B,EAAsC;AACpD,MAAIC,CAAC,GAAGH,SAAS,CAACE,MAAV,CAAiBA,MAAjB,CAAR;AAAA,MACIE,CAAC,GAAGL,IAAI,CAACG,MAAL,CAAYA,MAAZ,CADR;;AAGA,WAASG,cAAT,CAAwBC,CAAxB,EAA2BC,CAA3B,EAA8B;AAC5BD,IAAAA,CAAC,GAAG,CAACA,CAAL;AACA,QAAI,CAACC,CAAC,GAAG,CAACA,CAAN,KAAY,CAAhB,EAAmB,OAAO;AAAA,aAAMD,CAAN;AAAA,KAAP;AACnB,QAAIC,CAAC,IAAI,CAAT,EAAY,OAAO;AAAA,aAAM,CAAN;AAAA,KAAP;AACZ,WAAO,YAAW;AAChB,UAAIC,GAAG,GAAG,CAAV;AAAA,UAAaC,EAAE,GAAGH,CAAlB;AAAA,UAAqBI,EAAE,GAAGH,CAA1B;;AACA,aAAOE,EAAE,GAAGC,EAAL,GAAU,EAAV,IAAgBD,EAAE,IAAI,IAAIC,EAAR,CAAF,GAAgB,EAAvC,EAA2C;AACzC,YAAIC,CAAC,GAAGC,IAAI,CAACC,KAAL,CAAW,CAACJ,EAAE,GAAG,CAAN,IAAWC,EAAtB,CAAR;AAAA,YACII,CAAC,GAAGV,CAAC,CAACO,CAAD,EAAIF,EAAE,GAAGE,CAAL,GAAS,CAAb,CAAD,EADR;;AAEA,YAAIG,CAAC,IAAIJ,EAAT,EAAa;AACXF,UAAAA,GAAG,IAAIG,CAAP;AACAF,UAAAA,EAAE,IAAIE,CAAN;AACAD,UAAAA,EAAE,GAAG,CAACA,EAAE,GAAGI,CAAN,KAAY,IAAIA,CAAhB,CAAL;AACD,SAJD,MAIO;AACLL,UAAAA,EAAE,GAAGE,CAAC,GAAG,CAAT;AACAD,UAAAA,EAAE,IAAII,CAAN;AACD;AACF;;AACD,UAAIC,IAAI,GAAGL,EAAE,GAAG,GAAhB;AAAA,UACIM,MAAM,GAAGD,IAAI,GAAGL,EAAH,GAAQ,IAAIA,EAD7B;AAAA,UAEIO,CAAC,GAAGd,CAAC,CAACa,MAAD,CAFT;;AAGA,WAAK,IAAIE,CAAC,GAAGD,CAAC,EAAT,EAAaE,CAAC,GAAG,CAAtB,EAAyBD,CAAC,IAAIT,EAA9B,EAAkC,EAAEU,CAApC;AAAuCD,QAAAA,CAAC,IAAID,CAAC,EAAN;AAAvC;;AACA,aAAOT,GAAG,IAAIO,IAAI,GAAGI,CAAH,GAAOV,EAAE,GAAGU,CAApB,CAAV;AACD,KAnBD;AAoBD;;AAEDd,EAAAA,cAAc,CAACH,MAAf,GAAwBD,oBAAxB;AAEA,SAAOI,cAAP;AACD,CAjCc,EAiCZP,aAjCY,CAAf","sourcesContent":["import defaultSource from \"./defaultSource.js\";\nimport beta from \"./beta.js\";\nimport geometric from \"./geometric.js\";\n\nexport default (function sourceRandomBinomial(source) {\n  var G = geometric.source(source),\n      B = beta.source(source);\n\n  function randomBinomial(n, p) {\n    n = +n;\n    if ((p = +p) >= 1) return () => n;\n    if (p <= 0) return () => 0;\n    return function() {\n      var acc = 0, nn = n, pp = p;\n      while (nn * pp > 16 && nn * (1 - pp) > 16) {\n        var i = Math.floor((nn + 1) * pp),\n            y = B(i, nn - i + 1)();\n        if (y <= pp) {\n          acc += i;\n          nn -= i;\n          pp = (pp - y) / (1 - y);\n        } else {\n          nn = i - 1;\n          pp /= y;\n        }\n      }\n      var sign = pp < 0.5,\n          pFinal = sign ? pp : 1 - pp,\n          g = G(pFinal);\n      for (var s = g(), k = 0; s <= nn; ++k) s += g();\n      return acc + (sign ? k : nn - k);\n    };\n  }\n\n  randomBinomial.source = sourceRandomBinomial;\n\n  return randomBinomial;\n})(defaultSource);\n"]},"metadata":{},"sourceType":"module"}