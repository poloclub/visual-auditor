(this["webpackJsonpvisual-auditor"]=this["webpackJsonpvisual-auditor"]||[]).push([[0],{138:function(e){e.exports=JSON.parse('{"data":"insert common samples"}')},139:function(e){e.exports=JSON.parse('{"data":"insert reverse common samples"}')},234:function(e,t,r){},235:function(e,t,r){},244:function(e,t,r){},245:function(e,t,r){},247:function(e,t,r){},248:function(e,t,r){},249:function(e,t,r){},250:function(e,t,r){"use strict";r.r(t);var i=r(1),a=r.n(i),s=r(40),n=r.n(s),c=(r(234),r(10)),l=r(305),o=r(295),u=r(301),d=r(302),j=(r(235),r(0)),h=function(e){var t=e.view,r=e.setView;e.algorithm,e.setAlgorithm;return Object(j.jsx)("div",{className:"nav-container",children:Object(j.jsxs)(l.a,{sx:{s:1,minWidth:175,paddingRight:1},style:{marginTop:"1rem"},children:[Object(j.jsx)(u.a,{children:"View:"}),Object(j.jsxs)(o.a,{value:t,label:"View",onChange:function(e){r(e.target.value)},children:[Object(j.jsx)(d.a,{value:"bar",children:"Bar Chart Layout"}),Object(j.jsx)(d.a,{value:"force",children:"Force Layout"}),Object(j.jsx)(d.a,{value:"graph",children:"Graph Layout"})]})]})})},m=r(17),x=r(304),f=r(308),g=r(298),b=r(307),p=r(299),O=r(300),y=r(294),v=r(306),S=r(74),k=r.n(S),C=r(65),F=r.n(C),w=(r(244),function(e){var t=e.numFeatures,r=e.setNumFeatures,i=e.sampleSize,s=e.setSampleSize,n=e.metric,h=e.setMetric,S=e.sortBy,C=e.setSortBy,w=e.overperforming,z=e.setOverperforming,M=e.features,N=e.setFeatures,q=e.view,A=e.radius,H=e.setRadius,D=e.edgeFiltering,L=e.setEdgeFiltering,R=e.edgeForce,E=e.setEdgeForce,T=e.cursorMode,B=e.setCursorMode,W=e.showConvexHull,J=e.setShowConvexHull,V=a.a.useState(!1),_=Object(c.a)(V,2),I=_[0],G=_[1],P=function(e,t){e.target.checked?N([].concat(Object(m.a)(M),[t])):N(M.filter((function(e){return e!==t}))),J(!1)},K=a.a.useState(!0),Q=Object(c.a)(K,2),U=Q[0],X=Q[1];return U?Object(j.jsx)(x.a,{variant:"persistent",anchor:"left",open:U,sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:"15rem"}},children:Object(j.jsxs)("div",{className:"left-container",children:[Object(j.jsx)(k.a,{onClick:function(){X(!1)},style:{position:"relative",right:"-5rem",top:"1rem",opacity:"0.75",cursor:"pointer"}}),Object(j.jsx)("h1",{children:"Slice Filters"}),Object(j.jsx)("h2",{children:"Number of Features:"}),Object(j.jsx)(g.a,{"aria-label":"Number of Features",defaultValue:2,value:t,valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:4,size:"small",onChange:function(e){r(e.target.value),J(!1)}}),Object(j.jsx)("h2",{children:"Minimum Slice Size:"}),Object(j.jsx)(g.a,{size:"small",defaultValue:100,"aria-label":"Small",value:i,valueLabelDisplay:"auto",min:0,max:250,step:10,onChange:function(e){s(e.target.value),J(!1)}}),"graph"===q&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Edge Filtering:"}),Object(j.jsx)(g.a,{"aria-label":"Edge Filtering",defaultValue:300,value:D,valueLabelDisplay:"auto",step:10,min:0,max:1e3,size:"small",onChange:function(e){L(e.target.value),J(!1)}}),Object(j.jsx)("h2",{children:"Edge Force Strength:"}),Object(j.jsx)(g.a,{"aria-label":"Edge Force Strength",defaultValue:1,value:R,valueLabelDisplay:"auto",step:.01,min:0,max:5,size:"small",onChange:function(e){E(e.target.value),J(!1)}}),Object(j.jsx)("h2",{children:"Cursor Mode:"}),Object(j.jsxs)(l.a,{sx:{s:1,minWidth:175},children:[Object(j.jsx)(u.a,{children:"Mode:"}),Object(j.jsxs)(o.a,{value:T,label:"Mode",onChange:function(e){B(e.target.value),J(!1)},children:[Object(j.jsx)(d.a,{value:"drag",children:"Drag"}),Object(j.jsx)(d.a,{value:"select",children:"Select"})]})]})]}),"bar"===q?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Order By:"}),Object(j.jsxs)(l.a,{sx:{m:1,minWidth:175},children:[Object(j.jsx)(u.a,{id:"demo-simple-select-helper-label",children:"Order By:"}),Object(j.jsxs)(o.a,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:S,label:"Order By",onChange:function(e){C(e.target.value),J(!1)},children:[Object(j.jsx)(d.a,{value:"metric",children:n}),Object(j.jsx)(d.a,{value:"size",children:"Sample Size"})]})]})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:"Radius Function:"}),Object(j.jsxs)(l.a,{sx:{s:1,minWidth:175},children:[Object(j.jsx)(u.a,{children:"Radius:"}),Object(j.jsxs)(o.a,{value:A,label:"Radius",onChange:function(e){H(e.target.value),J(!1)},children:[Object(j.jsx)(d.a,{value:"log",children:"Log"}),Object(j.jsx)(d.a,{value:"sqrt",children:"Square Root"})]})]}),Object(j.jsx)("h2",{children:"Show Convex Hull:"}),Object(j.jsx)(v.a,{checked:W,onChange:function(e){e.target.checked&&(G(!0),setTimeout((function(){G(!1)}),4e3)),J(e.target.checked)},label:"Show Convex Hull",className:"switch",disabled:I})]}),Object(j.jsx)("h2",{children:"Overperforming Slices:"}),Object(j.jsx)(v.a,{checked:w,onChange:function(e){z(e.target.checked),J(!1)},label:"Overperforming Slices"}),Object(j.jsx)("h2",{children:"Select Features:"}),Object(j.jsxs)(b.a,{style:{marginLeft:"1rem"},children:[Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Age",onChange:function(e){return P(e,"Age")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Workclass",onChange:function(e){return P(e,"Workclass")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Education",onChange:function(e){return P(e,"Education")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Education-Num",onChange:function(e){return P(e,"Education-Num")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Marital Status",onChange:function(e){return P(e,"Marital Status")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Occupation",onChange:function(e){return P(e,"Occupation")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Relationship",onChange:function(e){return P(e,"Relationship")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Race",onChange:function(e){return P(e,"Race")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Sex",onChange:function(e){return P(e,"Sex")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Capital Gain",onChange:function(e){return P(e,"Capital Gain")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Capital Loss",onChange:function(e){return P(e,"Capital Loss")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Hours Per Week",onChange:function(e){return P(e,"Hours Per Week")}}),Object(j.jsx)(p.a,{control:Object(j.jsx)(O.a,{defaultChecked:!0}),label:"Country",onChange:function(e){return P(e,"Country")}})]}),Object(j.jsx)(y.a,{style:{padding:"1rem"}}),Object(j.jsx)(f.a,{variant:"outlined",onClick:function(e){r(2),s(0),h("Log Loss"),C("metric"),z(!1),L(300),E(1),J(!1)},style:{marginTop:"1rem"},children:"Reset"})]})}):Object(j.jsx)(F.a,{onClick:function(){X(!0)},style:{position:"absolute",left:"2rem",top:"2rem",cursor:"pointer",opacity:"0.75"},children:"Open"})}),z=(r(245),r.p,r.p,function(e){var t,r,i=e.details,s=e.metric,n=(e.overperforming,e.view),l=e.convexHull,o=a.a.useState(!0),u=Object(c.a)(o,2),d=u[0],h=u[1],m=function(){h(!1)};return d?Object(j.jsxs)(x.a,{sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:"15rem"}},variant:"persistent",anchor:"right",open:d,children:[" ","bar"===n?Object(j.jsxs)("div",{className:"right-container",children:[Object(j.jsx)(F.a,{onClick:m,style:{position:"relative",left:"-5rem",top:"1rem",opacity:"0.75",cursor:"pointer"}}),Object(j.jsx)("h1",{children:"Legend"}),Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"0.5rem"},children:[Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:"Bar Color:"})}),Object(j.jsx)("p",{children:"Performance"})]})]}):Object(j.jsxs)("div",{className:"right-container",children:[Object(j.jsx)(F.a,{onClick:m,style:{position:"relative",left:"-5rem",top:"1rem",opacity:"0.75",cursor:"pointer"}}),Object(j.jsx)("h1",{children:"Legend"}),Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"0.5rem"},children:[Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:"Node Color:"})}),Object(j.jsx)("p",{children:"Performance"})]}),Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"0.5rem"},children:[Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:"Node Size:"})}),Object(j.jsx)("p",{children:"Slice Sample Size"})]}),"graph"===n&&Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"0.5rem"},children:[Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:"Graph Edges:"})}),Object(j.jsx)("p",{children:"Overlapping Samples"})]}),l&&Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"0.5rem"},children:[Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:"Convex Hull:"})}),Object(j.jsx)("p",{children:"Same Features"})]})]}),null===i?Object(j.jsxs)("div",{className:"right-container",children:[Object(j.jsx)("h1",{children:"Selected Slice"}),Object(j.jsx)("p",{className:"thin",children:"Click on a slice to view the slice details"})]}):Object(j.jsxs)("div",{className:"right-container",children:[Object(j.jsx)("h1",{children:"Selected Slice"}),Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"0.5rem"},children:[Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:"Slice Definition:"})}),i.slice.split(", ").map((function(e){return Object(j.jsx)("p",{children:e})}))]}),Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"0.5rem"},children:[Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:"Slice Size:"})}),Object(j.jsxs)("p",{children:[" ",null===i||void 0===i?void 0:i.size," samples"]})]}),Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"0.5rem"},children:[Object(j.jsx)("p",{children:Object(j.jsxs)("strong",{children:["Slice ",s,":"]})}),Object(j.jsx)("p",{children:null===i||void 0===i||null===(t=i.metric)||void 0===t?void 0:t.toFixed(3)})]}),(null===i||void 0===i||null===(r=i.similarSlices)||void 0===r?void 0:r.length)>0?Object(j.jsxs)("div",{style:{paddingTop:"0.25rem",lineHeight:"1.25rem"},children:[Object(j.jsx)("p",{children:Object(j.jsx)("strong",{children:"Similar Slices:"})}),Object(j.jsx)("ul",{className:"similar-slices-list",children:null===i||void 0===i?void 0:i.similarSlices.map((function(e){return Object(j.jsx)("li",{className:"similar-slice",children:e})}))})]}):null]})]}):Object(j.jsx)(k.a,{onClick:function(){h(!0)},style:{position:"absolute",right:"2rem",top:"2rem",cursor:"pointer",opacity:"0.75"},children:"Open"})}),M=r(7),N=function(e,t){var r=a.a.useRef();return a.a.useEffect((function(){return e(M.q(r.current)),function(){}}),t),r};function q(e){var t=e.data,r=e.model,i=e.max,s=e.overperforming,n=e.metric,l=e.setDetails,o=a.a.useState(null),u=Object(c.a)(o,2),d=u[0],h=u[1],m=a.a.useState(!1),x=Object(c.a)(m,2),f=x[0],g=x[1];a.a.useEffect((function(){g(!1)}),[t]);var b=N((function(e){var a=600,c=60,o=30,u=50,j=90,m=M.q(".tooltip").style("opacity",0).style("width","200px").style("height","150px").style("padding","1rem 0.75rem").style("border-radius","20px"),x=M.o().domain(t.map((function(e){return e.slice}))).rangeRound([j,875-o]).padding(.1),b=M.p().domain([0,i]).rangeRound([a-u,c]);e.select(".x-axis").call((function(e){return e.attr("transform","translate(0,".concat(a-u,")")).call(M.a(x).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end")})),e.select(".y-axis").call((function(e){return e.attr("transform","translate(".concat(j,",0)")).style("color","steelblue").call(M.b(b).ticks(null,"s")).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.append("text").attr("x",-j).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(t.y1)}))})),e.select(".plot-area").selectAll(".bar").data(t).join("rect").attr("class","bar").attr("style",(function(e){if(e.slice===d)return"outline: 3px solid #FFD600;"})).style("fill",(function(e){return s?M.k(Math.abs((e.metric-r)/r)):M.l(Math.abs((e.metric-r)/r))})).on("mouseover",(function(e,t){M.q(this).style("opacity","0.7").style("cursor","pointer"),m.transition().duration(200).style("opacity",.9).style("right","100px").style("top","100px"),m.html('<strong>Slice Description: </strong><br><div style={{margin: "1rem"}}> </div>'+t.slice+"<br><strong>Size: </strong><br>"+t.size+" samples<br><strong>Metric: </strong><br>"+t.metric.toFixed(2)+"<br>"+"(".concat(Math.round((t.metric-r)/r*100),"% difference)"))})).on("mouseout",(function(e){M.q(this).style("opacity","1"),m.transition().style("opacity",0)})).on("click",(function(e,t){h(t.slice),l({slice:t.slice,size:t.size,metric:t.metric,similarSlices:[]})})).attr("x",(function(e){return x(e.slice)})).attr("width",x.bandwidth()).attr("y",(function(e){return b(0)-u})).attr("height",(function(e){return a-b(0)})),f?e.selectAll("rect").attr("y",(function(e){return b(e.metric)-u})).attr("height",(function(e){return a-b(e.metric)})):(e.selectAll("rect").transition().duration(800).attr("y",(function(e){return b(e.metric)-u})).attr("height",(function(e){return a-b(e.metric)})).delay((function(e,t){return 100*t})),g(!0)),e.selectAll(".line").remove(),e.selectAll(".label").remove(),e.append("svg:line").attr("class","line").attr("x1",60).attr("x2",875).attr("y1",b(r)).attr("y2",b(r)).style("stroke","#e6e6e6"),e.append("text").attr("class","label").text("Model").attr("x",0).attr("y",b(r)+5).style("fill","gray"),e.append("text").attr("class","label").text(n).attr("x",0).attr("y",b(r)+25).style("fill","gray")}),[t,n,d]);return Object(j.jsxs)("div",{style:{width:"100%"},children:[Object(j.jsx)("div",{className:"tooltip",style:{position:"absolute",background:"lightgray",right:"100px",top:"100px"}}),Object(j.jsxs)("svg",{ref:b,viewBox:"0 0 875 875",width:"80%",height:"80%",style:{marginLeft:"auto",marginRight:"auto",display:"block"},children:[Object(j.jsx)("g",{className:"plot-area"}),Object(j.jsx)("g",{className:"x-axis"}),Object(j.jsx)("g",{className:"y-axis"}),Object(j.jsx)("g",{className:"label"})]})]})}var A=Object(i.memo)(q);r(247),r(248);function H(e){var t=e.data,r=e.degree,i=e.view,a=e.metric,s=e.model,n=e.overperforming,c=e.setDetails,l=e.radius,o=e.setShowConvexHull,u=20,d=30,h=70,m=85,x=800,f=Array.from(Array(100).keys()),g=[],b={};t.forEach((function(e){e.classifiers=[];for(var t=e.slice;-1!==t.indexOf(":");){var i=t.substring(0,t.indexOf(":"));e.classifiers.push(i),g.includes(i)||g.push(i),r===e.classifiers.length&&(b[e.classifiers.join(", ")]?b[e.classifiers.join(", ")]++:b[e.classifiers.join(", ")]=1),t=-1!==t.indexOf(",")?t.substring(t.indexOf(",")+2):""}}));var p=Object.keys(b).map((function(e){return[e,b[e]]})).sort((function(e,t){return t[1]-e[1]})).slice(0,15),O=M.o().domain(g).rangeRound([m,800-d]).padding(.1),y=function(e){return e.attr("transform","translate(0,".concat(x-h,")")).call(M.a(O).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end")},v=function(e){return e.attr("transform","translate(".concat(m,",").concat(30-h,")")).call(M.b(O).tickSizeOuter(0)).selectAll("text").style("text-anchor","end")},S=function(e){return e.attr("transform","translate(0,".concat(x-h,")")).call(M.a(O).tickSizeOuter(0).tickSizeInner(-800-u+2*h)).style("opacity",.1).selectAll("text").style("display","none")},k=function(e){return e.attr("transform","translate(".concat(m,",").concat(30-h,")")).call(M.b(O).tickSizeOuter(0).tickSizeInner(-800-d+2*m)).style("opacity",.1).selectAll("text").style("display","none")};N((function(e){M.q(".hull").remove();for(var i=M.q(".tooltip").style("opacity",0).style("width","200px").style("height","150px").style("padding","1rem 0.5rem 0 0.5rem").style("border-radius","20px"),u=[],d=[],j=0;j<g.length;j++)u.push(650/g.length*j+100),d.push(625/g.length*j-100);var h=t.map((function(e){var t;return{radius:"log"===l?Math.log(e.size):Math.sqrt(e.size),category:e.degree,xFeature:e.classifiers[0],yFeature:null!==(t=e.classifiers[1])&&void 0!==t?t:e.classifiers[0],slice:e.slice,size:e.size,metric:e.metric}})),m=(M.h(h).force("charge",M.g().strength(-5)).force("x",M.i().x((function(e){return u[g.indexOf(e.xFeature)]-20}))).force("y",M.j().y((function(e){return r>1?d[g.indexOf(e.yFeature)]:200}))).force("collision",M.e().radius((function(e){return e.radius}))).on("tick",(function(){m.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).on("mouseover",(function(e,t){M.q(this).attr("r",1.1*t.radius).style("opacity","0.7").style("cursor","pointer"),i.transition().duration(200).style("opacity",.9).style("right","100px").style("top","100px"),i.html('<strong>Slice Description: </strong><br><div style={{margin: "1rem"}}> </div>'+t.slice+"<br><strong>Size: </strong><br>"+t.size+" samples<br><strong>"+a+": </strong><br>"+t.metric.toFixed(2)+"<br>"+"(".concat(Math.round((t.metric-s)/s*100),"% difference)"))})).on("mouseout",(function(e,t){M.q(this).attr("r",t.radius).style("opacity","1"),i.transition().style("opacity",0)})).on("click",(function(e,t){m.style("fill",(function(t){return e.target.__data__===t?"#FFD600":n?M.k(Math.abs((t.metric-s)/s)):M.l(Math.abs((t.metric-s)/s))})),c({slice:t.slice,size:t.size,metric:t.metric,similarSlices:[]})}))})),M.q(".g").selectAll("circle").data(h).join("circle").attr("class","node").attr("r",(function(e){return e.radius})).style("fill",(function(e){return n?M.k(Math.abs((e.metric-s)/s)):M.l(Math.abs((e.metric-s)/s))})).style("opacity",(function(e){return"1"})));var x=function(e,t){for(var i=["gray","green","yellow","black","purple"],a=[],s=0;s<p.length;s++){a=[];for(var n=0;n<h.length;n++)h[n].xFeature===p[s][0].split(", ")[0]&&(r<2||h[n].yFeature===p[s][0].split(", ")[1])&&(r<2?a.push([h[n].x+50,400]):a.push([h[n].x+50,h[n].y+200]));var c=M.n(a),l=M.m().curve(M.c);if(!c)return;e.append("path").attr("class","path".concat(r)).attr("d",l(c)).attr("fill",i[0]).attr("stroke",i[0]).attr("opacity",t)}};M.q(".x-axis-grid").call(S),M.q(".y-axis-grid").call(k),M.q(".x-axis").call(y),r>=2?M.q(".y-axis").call(v).style("opacity","1"):M.q(".y-axis").style("opacity","0"),M.q(".switch").on("click",(function(e,t){o(e.target.checked),e.target.checked?M.q(".hull").style("opacity","0").call(x,.25).transition().duration(500).style("opacity","1"):(M.q(".hull").remove(),M.r(".hull").transition().duration(0).style("opacity","0"))}))}),[t,i]);return"force"!==i?null:Object(j.jsxs)("div",{className:"force",children:[Object(j.jsx)("div",{className:"tooltip",style:{position:"absolute",background:"#e6e6e6",right:"100px",top:"100px"}}),Object(j.jsxs)("svg",{viewBox:"0 0 875 875",width:"80%",height:"80%",id:"force-svg",className:"svg",children:[Object(j.jsx)("g",{id:"force-g",className:"g",transform:"translate(50, 200)"}),Object(j.jsx)("g",{className:"x-axis"}),Object(j.jsx)("g",{className:"y-axis"}),Object(j.jsx)("g",{className:"x-axis-grid"}),Object(j.jsx)("g",{className:"y-axis-grid"}),f.map((function(e){return Object(j.jsx)("g",{className:"hull"},e)}))]})]})}var D=Object(i.memo)(H),L=(r(249),r(93)),R=r(94),E=r(138),T=r(139);function B(e){var t=e.data,r=e.degree,i=e.metric,s=e.model,n=e.overperforming,l=e.radiusType,o=e.edgeFiltering,u=e.edgeForce,d=e.setDetails,h=e.cursorMode,m=(e.algorithm,e.setShowConvexHull),x=30,f=30,g=60,b=85,p=a.a.useState(0),O=Object(c.a)(p,2),y=O[0],v=(O[1],Array.from(Array(100).keys()));var S=800,k=800,C=[],F={},w={};if("Log Loss"===i)n?(R,w=T):(w=E,L);else n?R:L;t.forEach((function(e){e.classifiers=[];for(var t=e.slice;-1!==t.indexOf(":");){var i=t.substring(0,t.indexOf(":"));e.classifiers.push(i),C.includes(i)||C.push(i),r===e.classifiers.length&&(F[e.classifiers.join(", ")]?F[e.classifiers.join(", ")]++:F[e.classifiers.join(", ")]=1),t=-1!==t.indexOf(",")?t.substring(t.indexOf(",")+2):""}}));for(var z=Object.keys(F).map((function(e){return[e,F[e]]})).sort((function(e,t){return t[1]-e[1]})).slice(0,15),q=[],A=[],H=(S-b-f)/(C.length+1),D=(k-x-g)/(C.length+2),B=0;B<C.length;B++)q.push(b+(B+1)*H),A.push(2*x+(B+1)*D);var W=M.o().domain(C).rangeRound([b,S-f]).padding(.1),J=function(e){return e.attr("transform","translate(0,".concat(k-g,")")).call(M.a(W).tickSizeOuter(0)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end")},V=function(e){return e.attr("transform","translate(".concat(b,",").concat(30-g,")")).call(M.b(W).tickSizeOuter(0)).selectAll("text").style("text-anchor","end")},_=function(e){return e.attr("transform","translate(0,".concat(k-g,")")).call(M.a(W).tickSizeOuter(0).tickSizeInner(-800-x+2*g)).style("opacity",.1).selectAll("text").style("display","none")},I=function(e){return e.attr("transform","translate(".concat(b,",").concat(30-g,")")).call(M.b(W).tickSizeOuter(0).tickSizeInner(-800-f+2*b)).style("opacity",.1).selectAll("text").style("display","none")},G=t.map((function(e){var t;return{radius:"log"===l?Math.log(e.size):Math.sqrt(e.size),category:e.degree,xFeature:e.classifiers[0],yFeature:null!==(t=e.classifiers[1])&&void 0!==t?t:e.classifiers[0],slice:e.slice,size:e.size,metric:e.metric,classifiers:e.classifiers}}));for(var P=[],K=0;K<G.length;K++)for(var Q=K+1;Q<G.length;Q++){var U=w[G[K].slice+"-"+G[Q].slice];U>o&&P.push({source:K,target:Q,sliceSource:G[K].slice,sliceTarget:G[Q].slice,count:U})}var X={nodes:G,links:P};function Y(e,t,r){return e<t?t:e>r?r:e}N((function(e){M.q(".hull").remove();var t=(e=M.q(".svg")).selectAll(".link").attr("class","link").data(X.links).join("line").classed("link",!0),a=e.selectAll(".node").data(X.nodes).join("circle").attr("r",(function(e){return e.radius})).style("fill",(function(e){return n?M.k(Math.abs((e.metric-s)/s)):M.l(Math.abs((e.metric-s)/s))})).classed("node",!0).classed("fixed",(function(e){return void 0!==e.fx})).on("mouseover",(function(e,t){"select"===h?M.q(this).attr("r",t.radius).style("opacity","0.7").style("cursor","pointer"):M.q(this).attr("r",t.radius).style("opacity","0.7").style("cursor","grab"),M.q(".tooltip").transition().duration(200).style("opacity",.9).style("right","100px").style("top","100px"),M.q(".tooltip").html('<strong>Slice Description: </strong><br><div style={{margin: "1rem"}}> </div>'+t.slice+"<br><strong>Size: </strong><br>"+t.size+" samples<br><strong>"+i+": </strong><br>"+t.metric.toFixed(2)+"<br>"+"(".concat(Math.round((t.metric-s)/s*100),"% difference)"))})).on("mouseout",(function(e,t){M.q(this).attr("r",t.radius).style("opacity","1"),M.q(".tooltip").transition().style("opacity",0)})).on("click",j),c=M.h().nodes(X.nodes).force("charge",M.g().strength(-5)).force("x",M.i().x((function(e){return q[C.indexOf(e.xFeature)]}))).force("y",M.j().y((function(e){return r>1?A[C.indexOf(e.yFeature)]:400}))).force("link",M.f(X.links).strength((function(e){return e.count/1e4*u}))).force("collision",M.e().radius((function(e){return e.radius}))).on("tick",(function(){t.attr("x1",(function(e){return Math.max(Math.min(e.source.x,S),e.source.radius+100)})).attr("y1",(function(e){return Math.max(Math.min(e.source.y,725),e.source.radius)})).attr("x2",(function(e){return Math.max(Math.min(e.target.x,S),e.target.radius+100)})).attr("y2",(function(e){return Math.max(Math.min(e.target.y,725),e.target.radius)})).style("stroke-width",(function(e){return Math.min(Math.pow(e.count/2e3,2)*u,3*Math.pow(e.count/2e3,2))})),a.attr("cx",(function(e){return Math.max(Math.min(e.x,S),e.radius+100)})).attr("cy",(function(e){return Math.max(Math.min(e.y,725),e.radius)}))}));if("drag"===h){var l=M.d().on("start",(function(e,t){M.q(this).classed("fixed",!0),M.q(this).style("fill","#FFD600"),d({slice:t.slice,size:t.size,metric:t.metric,similarSlices:P.sort((function(e,t){return t.count-e.count})).map((function(e){return e.count>o&&e.sliceSource===t.slice?e.sliceTarget:e.count>o&&e.sliceTarget===t.slice?e.sliceSource:void 0})).filter((function(e){return void 0!==e})).slice(0,10)})})).on("drag",(function(e,t){t.fx=Y(e.x,0,S),t.fy=Y(e.y,0,k),c.alpha(1).restart()}));a.call(l).on("click",j)}function j(e,t){"select"===h?(a.style("fill",(function(t){return e.target.__data__===t?"#FFD600":n?M.k(Math.abs((t.metric-s)/s)):M.l(Math.abs((t.metric-s)/s))})),d({slice:t.slice,size:t.size,metric:t.metric,similarSlices:P.sort((function(e,t){return t.count-e.count})).map((function(e){return e.count>o&&e.sliceSource===t.slice?e.sliceTarget:e.count>o&&e.sliceTarget===t.slice?e.sliceSource:void 0})).filter((function(e){return void 0!==e})).slice(0,10)})):(delete t.fx,delete t.fy,M.q(this).classed("fixed",!1),M.q(this).style("fill",(function(){return n?M.k(Math.abs((t.metric-s)/s)):M.l(Math.abs((t.metric-s)/s))})),c.alpha(1).restart())}var x=function(e,t){for(var i=["gray","green","yellow","black","purple","pink","red","orange","brown","blue","cyan","magenta","lime","navy","olive","teal","violet","wheat"],a=[],s=0;s<z.length;s++){a=[];for(var n=0;n<G.length;n++)G[n].xFeature===z[s][0].split(", ")[0]&&(r<2||G[n].yFeature===z[s][0].split(", ")[1])&&(r<2?a.push([G[n].x,400]):a.push([G[n].x,G[n].y]));var c=M.n(a),l=M.m().curve(M.c);if(!c)return;e.append("path").attr("class","path".concat(r)).attr("d",l(c)).attr("fill",i[0]).attr("stroke",i[0]).attr("opacity",t)}};e.select(".x-axis-grid").call(_),e.select(".y-axis-grid").call(I),e.select(".x-axis").call(J),r>=2?e.select(".y-axis").call(V).style("opacity","1"):e.select(".y-axis").style("opacity","0"),M.q(".switch").on("click",(function(e,t){m(e.target.checked),e.target.checked?M.q(".hull").style("opacity","0").call(x,.25).transition().duration(500).style("opacity","1"):(M.q(".hull").remove(),M.r(".hull").transition().duration(0).style("opacity","0"))}))}),[t,y]);return Object(j.jsxs)("div",{className:"graph",style:{overflow:"scroll"},children:[Object(j.jsx)("div",{className:"tooltip",style:{position:"absolute",background:"#e6e6e6",borderRadius:"20px",padding:"1rem",right:"100px",top:"100px"}}),Object(j.jsxs)("svg",{id:"graph-svg",className:"svg",viewBox:"0 0 875 875",width:"80%",height:"80%",children:[Object(j.jsx)("g",{id:"graph-g",className:"g",transform:"translate(50, 200)"}),Object(j.jsx)("g",{className:"x-axis"}),Object(j.jsx)("g",{className:"y-axis"}),Object(j.jsx)("g",{className:"x-axis-grid"}),Object(j.jsx)("g",{className:"y-axis-grid"}),v.map((function(e){return Object(j.jsx)("g",{className:"hull"},e)}))]}),Object(j.jsx)("br",{})]})}var W=Object(i.memo)(B),J=r(45),V=r(46),_=function(e){var t,r,i,a=e.numFeatures,s=e.sampleSize,n=e.metric,c=e.view,l=e.sortBy,o=e.overperforming,u=e.features,d=e.radius,h=e.edgeFiltering,x=e.edgeForce,f=e.setDetails,g=e.cursorMode,b=e.algorithm,p=e.setShowConvexHull;o?(t=Object.values(V.data).map((function(e){return Object.values(e)[0]})),r=Object.values(J.data).map((function(e){return Object.values(e)[0]})),i=V.model):(t=Object.values(J.data).map((function(e){return Object.values(e)[0]})),r=Object.values(V.data).map((function(e){return Object.values(e)[0]})),i=J.model);var O=t.map((function(e){return e.metric})),y=r.map((function(e){return e.metric})),v=Math.max.apply(Math,Object(m.a)(O).concat(Object(m.a)(y),[i])),S=t.filter((function(e){for(var t=e.slice;t.includes(":");){if(u.includes(t.substring(0,t.indexOf(":"))))return!0;t=t.substring(t.indexOf(":")+1)}return!1})).filter((function(e){return e.size>=s})).filter((function(e){return e.degree<=a})).sort((function(e,t){return"size"===l?t.size-e.size:"Log Loss"===n?o?e.metric-t.metric:t.metric-e.metric:o?t.metric-e.metric:e.metric-t.metric}));return S="bar"===c?S.slice(0,10):S.slice(0,100),Object(j.jsx)("div",{className:"main-container",style:{display:"block",margin:"auto",width:"75%"},children:"bar"===c?Object(j.jsx)(A,{data:S,model:i,max:v,view:c,overperforming:o,metric:n,setDetails:f}):"force"===c?Object(j.jsx)(D,{data:S,degree:a,view:c,metric:n,model:i,overperforming:o,setDetails:f,radius:d,setShowConvexHull:p}):Object(j.jsx)(W,{data:S,degree:a,metric:n,model:i,overperforming:o,radiusType:d,edgeFiltering:h,edgeForce:x,setDetails:f,cursorMode:g,algorithm:b,setShowConvexHull:p})})},I=Object(i.memo)(_);window.onbeforeunload=function(){window.scrollTo(0,0)};var G=function(){var e=a.a.useState("slicefinder"),t=Object(c.a)(e,2),r=t[0],i=t[1],s=a.a.useState(2),n=Object(c.a)(s,2),l=n[0],o=n[1],u=a.a.useState(0),d=Object(c.a)(u,2),m=d[0],x=d[1],f=a.a.useState("Log Loss"),g=Object(c.a)(f,2),b=g[0],p=g[1],O=a.a.useState("bar"),y=Object(c.a)(O,2),v=y[0],S=y[1],k=a.a.useState("metric"),C=Object(c.a)(k,2),F=C[0],M=C[1],N=a.a.useState(!1),q=Object(c.a)(N,2),A=q[0],H=q[1],D=a.a.useState("log"),L=Object(c.a)(D,2),R=L[0],E=L[1],T=a.a.useState(100),B=Object(c.a)(T,2),W=B[0],J=B[1],V=a.a.useState(1),_=Object(c.a)(V,2),G=(_[0],_[1],a.a.useState(1)),P=Object(c.a)(G,2),K=P[0],Q=P[1],U=a.a.useState("drag"),X=Object(c.a)(U,2),Y=X[0],Z=X[1],$=a.a.useState(["Age","Workclass","Education","Education-Num","Marital Status","Occupation","Relationship","Race","Sex","Capital Gain","Capital Loss","Hours Per Week","Country"]),ee=Object(c.a)($,2),te=ee[0],re=ee[1],ie=a.a.useState(null),ae=Object(c.a)(ie,2),se=ae[0],ne=ae[1],ce=a.a.useCallback((function(e){ne(e)}),[]),le=a.a.useState(!1),oe=Object(c.a)(le,2),ue=oe[0],de=oe[1];return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(h,{view:v,setView:S,algorithm:r,setAlgorithm:i}),Object(j.jsx)(w,{numFeatures:l,setNumFeatures:o,sampleSize:m,setSampleSize:x,metric:b,setMetric:p,sortBy:F,setSortBy:M,overperforming:A,setOverperforming:H,features:te,setFeatures:re,view:v,radius:R,setRadius:E,edgeFiltering:W,setEdgeFiltering:J,edgeForce:K,setEdgeForce:Q,cursorMode:Y,setCursorMode:Z,showConvexHull:ue,setShowConvexHull:de}),Object(j.jsx)(z,{details:se,metric:b,overperforming:A,view:v,convexHull:ue}),Object(j.jsx)(I,{numFeatures:l,sampleSize:m,metric:b,view:v,sortBy:F,overperforming:A,features:te,radius:R,edgeFiltering:W,edgeForce:K,setDetails:ce,cursorMode:Y,algorithm:r,setShowConvexHull:de})]})};n.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(G,{})}),document.getElementById("root"))},45:function(e){e.exports=JSON.parse('{"model":"insert log loss slices","data":"insert log loss slices"}')},46:function(e){e.exports=JSON.parse('{"model":"insert reverse log loss slices","data":"insert reverse log loss slices"}')},93:function(e){e.exports=JSON.parse('{"data":"insert log loss samples"}')},94:function(e){e.exports=JSON.parse('{"data":"insert log loss samples"}')}},[[250,1,2]]]);
//# sourceMappingURL=main.a83eb126.chunk.js.map