(this["webpackJsonpvisual-auditor"]=this["webpackJsonpvisual-auditor"]||[]).push([[0],{140:function(e){e.exports=JSON.parse('{"data":"insert common samples"}')},141:function(e){e.exports=JSON.parse('{"data":"insert reverse common samples"}')},237:function(e,t,r){},238:function(e,t,r){},247:function(e,t,r){},248:function(e,t,r){},250:function(e,t,r){},251:function(e,t,r){},252:function(e,t,r){},253:function(e,t,r){"use strict";r.r(t);var s=r(1),a=r.n(s),c=r(40),i=r.n(c),n=(r(237),r(10)),l=r(313),o=r(303),u=r(308),d=r(309),h=(r(238),r(0)),x=function(e){var t=e.view,r=e.setView;e.algorithm,e.setAlgorithm;return Object(h.jsx)("div",{className:"nav-container",children:Object(h.jsxs)(l.a,{sx:{s:1,minWidth:175,paddingRight:1},children:[Object(h.jsx)(u.a,{children:"View:"}),Object(h.jsxs)(o.a,{value:t,label:"View",onChange:function(e){r(e.target.value)},children:[Object(h.jsx)(d.a,{value:"force",children:"Force Layout"}),Object(h.jsx)(d.a,{value:"graph",children:"Graph Layout"}),Object(h.jsx)(d.a,{value:"bar",children:"Bar Chart Layout"})]})]})})},f=r(17),m=r(312),j=r(317),g=r(306),p=r(316),y=r(310),b=r(307),O=r(301),v=r(315),S=r(314),z=r(64),w=(r(247),function(e){var t=e.overperforming,r=e.nodeColor;return t?Object(h.jsxs)("div",{children:["loss"===r?Object(h.jsx)("p",{style:{fontSize:"0.75rem",color:"black"},children:"Darker = lower loss (% improv.)"}):Object(h.jsx)("p",{style:{fontSize:"0.75rem",color:"black"},children:"Darker = more accurate"}),Object(h.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(h.jsxs)("div",{className:"legend",style:{background:"linear-gradient(to right, #E3EEF9, #B5D4E9, #6EAED5, #1A64AA, #092F6B)",width:"90%",height:"25px",margin:"0 auto"},children:["loss"===r?Object(h.jsx)("p",{style:{position:"absolute",left:"0.75rem",top:"330px",fontSize:"0.75rem"},children:"0%"}):Object(h.jsx)("p",{style:{position:"absolute",left:"0.75rem",top:"330px",fontSize:"0.75rem"},children:"0.0"}),"loss"===r?Object(h.jsx)("p",{style:{position:"absolute",left:"9.5rem",top:"330px",fontSize:"0.75rem",color:"white"},children:">100%"}):Object(h.jsx)("p",{style:{position:"absolute",left:"11rem",top:"330px",fontSize:"0.75rem",color:"white"},children:"1.0"})]})})]}):Object(h.jsxs)("div",{children:["loss"===r?Object(h.jsx)("p",{style:{fontSize:"0.75rem",color:"black"},children:"Darker = higher loss (% worse)"}):Object(h.jsx)("p",{style:{fontSize:"0.75rem",color:"black"},children:"Darker = less accurate"}),Object(h.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(h.jsxs)("div",{className:"legend",style:{background:"linear-gradient(to right, #FFF1EC, #F99075, #E83F36, #67000E)",width:"90%",height:"25px",margin:"0 auto"},children:["loss"===r?Object(h.jsx)("p",{style:{position:"absolute",left:"0.75rem",top:"330px",fontSize:"0.75rem"},children:"0%"}):Object(h.jsx)("p",{style:{position:"absolute",left:"0.75rem",top:"330px",fontSize:"0.75rem"},children:"1.0"}),"loss"===r?Object(h.jsx)("p",{style:{position:"absolute",left:"9.5rem",top:"330px",fontSize:"0.75rem",color:"white"},children:">100%"}):Object(h.jsx)("p",{style:{position:"absolute",left:"11rem",top:"330px",fontSize:"0.75rem",color:"white"},children:"0.0"})]})})]})}),k=Object(s.memo)(w),F=function(e){e.numFeatures;var t=e.setNumFeatures,r=e.sampleSize,s=e.setSampleSize,c=(e.metric,e.setMetric),i=e.sortBy,u=e.setSortBy,x=e.overperforming,w=e.setOverperforming,F=e.features,M=e.setFeatures,C=e.view,N=(e.radius,e.setRadius,e.edgeFiltering),A=e.setEdgeFiltering,D=e.edgeForce,L=e.setEdgeForce,E=(e.cursorMode,e.setCursorMode,e.nodeSize),B=e.setNodeSize,H=e.nodeColor,R=e.setNodeColor,T=e.show,_=e.setShow,J=e.showConvexHull,V=e.setShowConvexHull,I=a.a.useState(!1),W=Object(n.a)(I,2),q=W[0],X=W[1];return Object(h.jsx)(m.a,{variant:"permanent",anchor:"left",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:"15rem"}},children:Object(h.jsxs)("div",{className:"left-container",children:[Object(h.jsxs)("div",{style:{margin:"2rem 0",lineHeight:"0.5rem"},children:[Object(h.jsx)("h1",{children:"Slice Settings"}),"bar"!==C?Object(h.jsx)("h2",{children:"Each slice is a node"}):Object(h.jsx)("h2",{children:"Each slice is a bar"})]}),"bar"===C?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Sort By:"})}),Object(h.jsx)(l.a,{sx:{m:0,minWidth:175},size:"small",children:Object(h.jsxs)(o.a,{value:i,onChange:function(e){u(e.target.value),V(!1)},children:[Object(h.jsx)(d.a,{value:"loss",children:"Log Loss"}),Object(h.jsx)(d.a,{value:"accuracy",children:"Balanced Accuracy"}),Object(h.jsx)(d.a,{value:"size",children:"Sample Size"})]})}),Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Color Represents"})}),Object(h.jsx)(l.a,{sx:{s:1,minWidth:175},size:"small",children:Object(h.jsxs)(o.a,{value:H,onChange:function(e){R(e.target.value),V(!1)},children:[Object(h.jsx)(d.a,{value:"loss",children:"Log Loss"}),Object(h.jsx)(d.a,{value:"accuracy",children:"Balanced Accuracy"})]})}),Object(h.jsx)(k,{overperforming:x,nodeColor:H})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Size Represents"})}),Object(h.jsx)(l.a,{sx:{s:1,minWidth:175},size:"small",children:Object(h.jsxs)(o.a,{value:E,onChange:function(e){B(e.target.value),V(!1)},children:[Object(h.jsx)(d.a,{value:"size",children:"Slice Sample Size"}),Object(h.jsx)(d.a,{value:"accuracy",children:"Balanced Accuracy"})]})}),Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Color Represents"})}),Object(h.jsx)(l.a,{sx:{s:1,minWidth:175},size:"small",children:Object(h.jsxs)(o.a,{value:H,onChange:function(e){R(e.target.value),V(!1)},children:[Object(h.jsx)(d.a,{value:"loss",children:"Log Loss"}),Object(h.jsx)(d.a,{value:"accuracy",children:"Balanced Accuracy"})]})}),Object(h.jsx)(k,{overperforming:x,nodeColor:H}),Object(h.jsx)(O.a,{style:{padding:"1rem"}}),Object(h.jsx)("p",{children:Object(h.jsxs)("strong",{children:["Show top ",T," slices"]})}),Object(h.jsx)(S.a,{sx:{width:"10rem",margin:"1rem"},children:Object(h.jsx)(g.a,{size:"small",defaultValue:100,"aria-label":"Small",value:T,valueLabelDisplay:"auto",min:10,max:100,step:10,onChange:function(e){_(e.target.value),V(!1)}})}),Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"sorted by"})}),Object(h.jsx)(l.a,{sx:{s:1,minWidth:175},size:"small",children:Object(h.jsxs)(o.a,{value:i,onChange:function(e){u(e.target.value),V(!1)},children:[Object(h.jsx)(d.a,{value:"loss",children:"Log Loss"}),Object(h.jsx)(d.a,{value:"accuracy",children:"Balanced Accuracy"}),Object(h.jsx)(d.a,{value:"size",children:"Sample Size"})]})}),Object(h.jsx)(O.a,{style:{padding:"1rem"}}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)("div",{style:{width:"75%"},children:Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Convex Hull:"})})}),Object(h.jsx)(v.a,{checked:J,onChange:function(e){e.target.checked&&(X(!0),setTimeout((function(){X(!1)}),4e3)),V(e.target.checked)},label:"Show Convex Hull",className:"switch",disabled:q})]})]}),Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(h.jsx)("div",{style:{width:"75%"},children:Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Overperforming:"})})}),Object(h.jsx)(v.a,{checked:x,onChange:function(e){w(e.target.checked),V(!1)},label:"Overperforming Slices"})]}),"graph"===C&&Object(h.jsxs)("div",{style:{lineHeight:"0.5"},children:[Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Edge Filtering:"})}),Object(h.jsx)(S.a,{sx:{width:"10rem",margin:"0 1rem"},children:Object(h.jsx)(g.a,{"aria-label":"Edge Filtering",value:N,valueLabelDisplay:"auto",defaultValue:500,step:100,min:0,max:2e3,size:"small",onChange:function(e){A(e.target.value),V(!1)}})}),Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Edge Force Strength:"})}),Object(h.jsxs)(S.a,{sx:{width:"10rem",margin:"0 1rem"},children:["`            ",Object(h.jsx)(g.a,{"aria-label":"Edge Force Strength",defaultValue:1,value:D,valueLabelDisplay:"auto",step:.01,min:0,max:5,size:"small",onChange:function(e){L(e.target.value),V(!1)}}),"`"]})]}),Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Minimum Slice Size:"})}),Object(h.jsx)(S.a,{sx:{width:"10rem",margin:"1rem"},children:Object(h.jsx)(g.a,{size:"small",defaultValue:100,"aria-label":"Small",value:r,valueLabelDisplay:"auto",min:0,max:250,step:10,onChange:function(e){s(e.target.value),V(!1)}})}),Object(h.jsx)("p",{children:Object(h.jsx)("strong",{children:"Features:"})}),Object(h.jsx)(p.a,{style:{marginLeft:"1rem"},children:z.features.sort().map((function(e){return Object(h.jsx)(y.a,{control:Object(h.jsx)(b.a,{defaultChecked:!0,checked:F.includes(e)}),label:e,onChange:function(t){return function(e,t){e.target.checked?M([].concat(Object(f.a)(F),[t])):M(F.filter((function(e){return e!==t}))),V(!1)}(t,e)}},e)}))}),Object(h.jsx)(O.a,{style:{padding:"1rem"}}),Object(h.jsx)(j.a,{variant:"outlined",onClick:function(e){M(z.features),t(2),s(0),c("Log Loss"),u("metric"),w(!1),A(500),L(1),V(!1),B("size"),R("loss")},style:{marginTop:"1rem"},children:"Reset"})]})})},M=(r(248),r(139),r(94),r.p,r.p,r(7)),C=function(e,t){var r=a.a.useRef();return a.a.useEffect((function(){return e(M.r(r.current)),function(){}}),t),r};function N(e){var t=e.data,r=e.model,s=e.max,c=e.overperforming,i=e.metric,l=e.accuracy,o=e.setDetails,u=e.nodeColor,d=a.a.useState(null),x=Object(n.a)(d,2),f=x[0],m=x[1],j=a.a.useState(!1),g=Object(n.a)(j,2),p=g[0],y=g[1];a.a.useEffect((function(){y(!1)}),[t]);var b=C((function(e){var a=600,n=60,d=30,h=50,x=90,j=M.r(".tooltip").style("opacity",0).style("width","250px").style("height","200px").style("padding","1rem 1rem 0rem 1rem").style("border-radius","20px"),g=M.p().domain(t.map((function(e){return e.slice}))).rangeRound([x,875-d]).padding(.1),b=M.q().domain([0,s]).rangeRound([a-h,n]);e.select(".x-axis").call((function(e){return e.attr("transform","translate(0,".concat(a-h,")")).call(M.a(g).tickSizeOuter(0)).selectAll("text").style("font","14px").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end")})),e.select(".y-axis").call((function(e){return e.attr("transform","translate(".concat(x,",0)")).style("color","steelblue").call(M.b(b).ticks(null,"s")).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.append("text").attr("x",-x).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(t.y1)}))})),e.select(".plot-area").selectAll(".bar").data(t).join("rect").attr("class","bar").attr("style",(function(e){if(e.slice===f)return"outline: 3px solid #FFD600;"})).style("fill",(function(e){return c?M.l(Math.abs("loss"===u?(e.metric-r)/r:e.accuracy)):M.m(Math.abs("loss"===u?(e.metric-r)/r:1-e.accuracy))})).on("mouseover",(function(e,t){var s;M.r(this).style("opacity","0.7").style("cursor","pointer"),j.transition().duration(200).style("opacity",.9).style("right","20%").style("top","100px"),j.html("<strong>Description: </strong>"+t.slice+"<br><br><strong>Size: </strong>"+t.size+" samples<br><br><strong>Log Loss: </strong>"+t.metric.toFixed(2)+" "+"(".concat(Math.round((t.metric-r)/r*100),"% difference)")+"<br><br><strong>Accuracy: </strong>"+(null===(s=t.accuracy)||void 0===s?void 0:s.toFixed(2))+" "+"(".concat(Math.round((t.accuracy-l)/l*100),"% difference)"))})).on("mouseout",(function(e){M.r(this).style("opacity","1"),j.transition().style("opacity",0)})).on("click",(function(e,t){m(t.slice),o({slice:t.slice,size:t.size,metric:t.metric,similarSlices:[]})})).attr("x",(function(e){return g(e.slice)})).attr("width",g.bandwidth()).attr("y",(function(e){return b(0)-h})).attr("height",(function(e){return a-b(0)})),p?e.selectAll("rect").attr("y",(function(e){return b(e.metric)-h})).attr("height",(function(e){return a-b(e.metric)})):(e.selectAll("rect").transition().duration(800).attr("y",(function(e){return b(e.metric)-h})).attr("height",(function(e){return a-b(e.metric)})).delay((function(e,t){return 100*t})),y(!0)),e.selectAll(".line").remove(),e.selectAll(".label").remove(),e.append("svg:line").attr("class","line").attr("x1",60).attr("x2",875).attr("y1",b(r)).attr("y2",b(r)).style("stroke","#e6e6e6"),e.append("text").attr("class","label").text("Model").attr("x",0).attr("y",b(r)+5).style("fill","gray"),e.append("text").attr("class","label").text(i).attr("x",0).attr("y",b(r)+25).style("fill","gray")}),[t,i,f]);return Object(h.jsxs)("div",{style:{width:"100%"},children:[Object(h.jsx)("div",{className:"tooltip",style:{position:"absolute",background:"lightgray",right:"20%",top:"100px"}}),Object(h.jsxs)("svg",{ref:b,viewBox:"0 0 875 875",width:"80%",height:"80%",style:{margin:"auto",display:"block"},children:[Object(h.jsx)("g",{className:"plot-area"}),Object(h.jsx)("g",{className:"x-axis"}),Object(h.jsx)("g",{className:"y-axis"}),Object(h.jsx)("g",{className:"label"})]})]})}var A=Object(s.memo)(N);r(250),r(251);function D(e){var t=e.data,r=e.degree,s=e.view,a=(e.metric,e.model),c=e.accuracy,i=e.overperforming,n=e.setDetails,l=(e.radius,e.setShowConvexHull),o=e.nodeSize,u=e.nodeColor,d=50,x=30,f=70,m=85,j=800,g=Array.from(Array(100).keys()),p=[],y={};t.forEach((function(e){e.classifiers=[];for(var t=e.slice;-1!==t.indexOf(":");){var s=t.substring(0,t.indexOf(":"));e.classifiers.push(s),p.includes(s)||p.push(s),r===e.classifiers.length&&(y[e.classifiers.join(", ")]?y[e.classifiers.join(", ")]++:y[e.classifiers.join(", ")]=1),t=-1!==t.indexOf(",")?t.substring(t.indexOf(",")+2):""}})),p=p.sort();var b=Object.keys(y).map((function(e){return[e,y[e]]})).sort((function(e,t){return t[1]-e[1]})).slice(0,15),O=M.p().domain(p).rangeRound([m,800-x]).padding(.1),v=function(e){return e.attr("transform","translate(0,".concat(j-f-670,")")).attr("class","xAxis").call(M.c(O).tickSizeOuter(0)).selectAll("text").style("font-size","14px").attr("transform","translate(10,-10)rotate(-45)").style("text-anchor","start")},S=function(e){return e.attr("transform","translate(".concat(m,",").concat(30-f,")")).attr("class","xAxis").call(M.b(O).tickSizeOuter(0)).selectAll("text").style("font-size","14px").style("text-anchor","end")},z=function(e){return e.attr("transform","translate(0,".concat(j-f,")")).call(M.a(O).tickSizeOuter(0).tickSizeInner(-800-d+2*f)).style("opacity",.1).selectAll("text").style("display","none")},w=function(e){return e.attr("transform","translate(".concat(m,",").concat(30-f,")")).call(M.b(O).tickSizeOuter(0).tickSizeInner(-800-x+2*m)).style("opacity",.1).selectAll("text").style("display","none")};C((function(e){M.r(".hull").remove();for(var s=M.r(".tooltip").style("opacity",0).style("width","250px").style("height","200px").style("padding","1rem 1rem 0 1rem").style("border-radius","20px"),d=[],h=[],x=0;x<p.length;x++)d.push(650/p.length*x+100),h.push(625/p.length*x-100);var f=t.map((function(e){var t;return{radius:"size"===o?2*Math.log(e.size):10*Math.sqrt(e.accuracy),category:e.degree,xFeature:e.classifiers[0],yFeature:null!==(t=e.classifiers[1])&&void 0!==t?t:e.classifiers[0],slice:e.slice,size:e.size,metric:e.metric,accuracy:e.accuracy}})),m=(M.i(f).force("charge",M.h().strength(-5)).force("x",M.j().x((function(e){return d[p.indexOf(e.xFeature)]-20}))).force("y",M.k().y((function(e){return r>1?h[p.indexOf(e.yFeature)]:200}))).force("collision",M.f().radius((function(e){return e.radius}))).on("tick",(function(){m.attr("cx",(function(e){return e.x})).attr("cy",(function(e){return e.y})).on("mouseover",(function(e,t){var r;M.r(this).attr("r",1.1*t.radius).style("opacity","0.7").style("cursor","pointer"),s.transition().duration(0).style("display","block").style("opacity",.9).style("left",e.clientX+50+"px").style("top",e.clientY+"px"),s.html("<strong>Description: </strong>"+t.slice+"<br><br><strong>Size: </strong>"+t.size+" samples<br><br><strong>Log Loss: </strong>"+t.metric.toFixed(2)+" "+"(".concat(Math.round((t.metric-a)/a*100),"% difference)")+"<br><br><strong>Accuracy: </strong>"+(null===(r=t.accuracy)||void 0===r?void 0:r.toFixed(2))+" "+"(".concat(Math.round((t.accuracy-c)/c*100),"% difference)"))})).on("mouseout",(function(e,t){M.r(this).attr("r",t.radius).style("opacity","1"),s.transition().duration(50).style("opacity",0).style("display","none")})).on("click",(function(e,t){m.style("fill",(function(t){return e.target.__data__===t?"#FFD600":i?M.l(Math.abs("loss"===u?(t.metric-a)/a:t.accuracy)):M.m(Math.abs("loss"===u?(t.metric-a)/a:1-t.accuracy))})),n({slice:t.slice,size:t.size,metric:t.metric,similarSlices:[]})}))})),M.r(".g").selectAll("circle").data(f).join("circle").attr("class","node").attr("r",(function(e){return e.radius})).style("fill",(function(e){return i?M.l(Math.abs("loss"===u?(e.metric-a)/a:e.accuracy)):M.m(Math.abs("loss"===u?(e.metric-a)/a:1-e.accuracy))})).style("opacity",(function(e){return"1"})));var j=function(e,t){for(var s=["gray","green","yellow","black","purple"],a=[],c=0;c<b.length;c++){a=[];for(var i=0;i<f.length;i++)f[i].xFeature===b[c][0].split(", ")[0]&&(r<2||f[i].yFeature===b[c][0].split(", ")[1])&&(r<2?a.push([f[i].x+50,400]):a.push([f[i].x+50,f[i].y+200]));var n=M.o(a),l=M.n().curve(M.d);if(!n)return;e.append("path").attr("class","path".concat(r)).attr("d",l(n)).attr("fill",s[0]).attr("stroke",s[0]).attr("opacity",t)}};M.r(".x-axis-grid").call(z),M.r(".y-axis-grid").call(w),M.r(".x-axis").call(v),r>=2?M.r(".y-axis").call(S).style("opacity","1"):M.r(".y-axis").style("opacity","0"),M.r(".switch").on("click",(function(e,t){l(e.target.checked),e.target.checked?M.r(".hull").style("opacity","0").call(j,.25).transition().duration(500).style("opacity","1"):(M.r(".hull").remove(),M.s(".hull").transition().duration(0).style("opacity","0"))}))}),[t,s]);return"force"!==s?null:Object(h.jsxs)("div",{className:"force",children:[Object(h.jsx)("div",{className:"tooltip",style:{position:"absolute",background:"#e6e6e6",right:"20%",top:"100px"}}),Object(h.jsx)("svg",{viewBox:"0 0 875 875",width:"80%",height:"100%",id:"force-svg",className:"svg",style:{margin:"0 auto",display:"block",height:"1000px"},children:Object(h.jsxs)("g",{transform:"translate(50, 0)",children:[Object(h.jsx)("g",{id:"force-g",className:"g",transform:"translate(50, 200)"}),Object(h.jsx)("g",{className:"x-axis",style:{padding:"100px"}}),Object(h.jsx)("g",{className:"y-axis"}),Object(h.jsx)("g",{className:"x-axis-grid"}),Object(h.jsx)("g",{className:"y-axis-grid"}),g.map((function(e){return Object(h.jsx)("g",{className:"hull"},e)}))]})})]})}var L=Object(s.memo)(D),E=(r(252),r(95)),B=r(96),H=r(140),R=r(141);function T(e){var t=e.data,r=e.degree,s=e.metric,c=e.model,i=e.accuracy,l=e.overperforming,o=(e.radiusType,e.edgeFiltering),u=e.edgeForce,d=e.setDetails,x=e.cursorMode,f=(e.algorithm,e.setShowConvexHull),m=e.nodeSize,j=e.nodeColor,g=50,p=30,y=70,b=85,O=a.a.useState(0),v=Object(n.a)(O,2),S=v[0],z=(v[1],Array.from(Array(100).keys()));var w=800,k=800,F=[],N={},A={};if("Log Loss"===s)l?(B,A=R):(A=H,E);else l?B:E;t.forEach((function(e){e.classifiers=[];for(var t=e.slice;-1!==t.indexOf(":");){var s=t.substring(0,t.indexOf(":"));e.classifiers.push(s),F.includes(s)||F.push(s),r===e.classifiers.length&&(N[e.classifiers.join(", ")]?N[e.classifiers.join(", ")]++:N[e.classifiers.join(", ")]=1),t=-1!==t.indexOf(",")?t.substring(t.indexOf(",")+2):""}})),F=F.sort();for(var D=Object.keys(N).map((function(e){return[e,N[e]]})).sort((function(e,t){return t[1]-e[1]})).slice(0,15),L=[],T=[],_=(w-b-p)/(F.length+1),J=(k-g-y)/(F.length+2),V=0;V<F.length;V++)L.push(b+(V+1)*_),T.push(2*g+(V+1)*J);var I=M.p().domain(F).rangeRound([b,w-p]).padding(.1),W=function(e){return e.attr("transform","translate(0,".concat(k-y-670,")")).attr("class","xAxis").call(M.c(I).tickSizeOuter(0)).selectAll("text").style("font-size","14px").attr("transform","translate(10,-10)rotate(-45)").style("text-anchor","start")},q=function(e){return e.attr("transform","translate(".concat(b,",").concat(30-y,")")).attr("class","xAxis").call(M.b(I).tickSizeOuter(0)).selectAll("text").style("font-size","14px").style("text-anchor","end")},X=function(e){return e.attr("transform","translate(0,".concat(k-y,")")).call(M.a(I).tickSizeOuter(0).tickSizeInner(-800-g+2*y)).style("opacity",.1).selectAll("text").style("display","none")},Y=function(e){return e.attr("transform","translate(".concat(b,",").concat(30-y,")")).call(M.b(I).tickSizeOuter(0).tickSizeInner(-800-p+2*b)).style("opacity",.1).selectAll("text").style("display","none")},G=t.map((function(e){var t;return{radius:"size"===m?2*Math.log(e.size):10*Math.sqrt(e.accuracy),category:e.degree,xFeature:e.classifiers[0],yFeature:null!==(t=e.classifiers[1])&&void 0!==t?t:e.classifiers[0],slice:e.slice,size:e.size,metric:e.metric,classifiers:e.classifiers,accuracy:e.accuracy}}));for(var K=[],P=0;P<G.length;P++)for(var Q=P+1;Q<G.length;Q++){var U=A[G[P].slice+"-"+G[Q].slice];U>o&&K.push({source:P,target:Q,sliceSource:G[P].slice,sliceTarget:G[Q].slice,count:U})}var Z={nodes:G,links:K};function $(e,t,r){return e<t?t:e>r?r:e}C((function(e){M.r(".hull").remove();var t=(e=M.r(".svg")).selectAll(".link").attr("class","link").data(Z.links).join("line").classed("link",!0),s=e.selectAll(".node").data(Z.nodes).join("circle").attr("r",(function(e){return e.radius})).style("fill",(function(e){return l?M.l(Math.abs("loss"===j?(e.metric-c)/c:e.accuracy)):M.m(Math.abs("loss"===j?(e.metric-c)/c:1-e.accuracy))})).classed("node",!0).classed("fixed",(function(e){return void 0!==e.fx})).on("mouseover",(function(e,t){var r;"select"===x?M.r(this).attr("r",t.radius).style("opacity","0.7").style("cursor","pointer"):M.r(this).attr("r",t.radius).style("opacity","0.7").style("cursor","grab"),M.r(".tooltip").transition().duration(200).attr("max-width","100px").style("display","block").style("opacity",.9).style("left",e.clientX+100+"px").style("top",e.clientY+"px").style("padding","1rem 1rem 1rem 1rem"),M.r(".tooltip").html("<strong>Description: </strong>"+t.slice+"<br><br><strong>Size: </strong>"+t.size+" samples<br><br><strong>Log Loss: </strong>"+t.metric.toFixed(2)+" "+"(".concat(Math.round((t.metric-c)/c*100),"% difference)")+"<br><br><strong>Accuracy: </strong>"+(null===(r=t.accuracy)||void 0===r?void 0:r.toFixed(2))+" "+"(".concat(Math.round((t.accuracy-i)/i*100),"% difference)"))})).on("mouseout",(function(e,t){M.r(this).attr("r",t.radius).style("opacity","1"),M.r(".tooltip").transition().style("opacity",0).style("display","none")})).on("click",h),a=M.i().nodes(Z.nodes).force("charge",M.h().strength(-5)).force("x",M.j().x((function(e){return L[F.indexOf(e.xFeature)]}))).force("y",M.k().y((function(e){return r>1?T[F.indexOf(e.yFeature)]:400}))).force("link",M.g(Z.links).strength((function(e){return e.count/1e5*u}))).force("collision",M.f().radius((function(e){return e.radius}))).on("tick",(function(){t.attr("x1",(function(e){return Math.max(Math.min(e.source.x,w),e.source.radius+100)+50})).attr("y1",(function(e){return Math.max(Math.min(e.source.y,725),e.source.radius)})).attr("x2",(function(e){return Math.max(Math.min(e.target.x,w),e.target.radius+100)+50})).attr("y2",(function(e){return Math.max(Math.min(e.target.y,725),e.target.radius)})).style("stroke-width",(function(e){return Math.min(Math.pow(e.count/2e3,2)*u,3*Math.pow(e.count/2e3,2))})),s.attr("cx",(function(e){return Math.max(Math.min(e.x,w),e.radius+100)+50})).attr("cy",(function(e){return Math.max(Math.min(e.y,725),e.radius)}))}));if("drag"===x){var n=M.e().on("start",(function(e,t){M.r(this).classed("fixed",!0),M.r(this).style("fill","#FFD600"),d({slice:t.slice,size:t.size,metric:t.metric,similarSlices:K.sort((function(e,t){return t.count-e.count})).map((function(e){return e.count>o&&e.sliceSource===t.slice?e.sliceTarget:e.count>o&&e.sliceTarget===t.slice?e.sliceSource:void 0})).filter((function(e){return void 0!==e})).slice(0,10)})})).on("drag",(function(e,t){t.fx=$(e.x,0,w),t.fy=$(e.y,0,k),a.alpha(1).restart()}));s.call(n).on("click",h)}function h(e,t){"select"===x?(s.style("fill",(function(t){return e.target.__data__===t?"#FFD600":l?M.l(Math.abs("loss"===j?(t.metric-c)/c:t.accuracy)):M.m(Math.abs("loss"===j?(t.metric-c)/c:1-t.accuracy))})),d({slice:t.slice,size:t.size,metric:t.metric,similarSlices:K.sort((function(e,t){return t.count-e.count})).map((function(e){return e.count>o&&e.sliceSource===t.slice?e.sliceTarget:e.count>o&&e.sliceTarget===t.slice?e.sliceSource:void 0})).filter((function(e){return void 0!==e})).slice(0,10)})):(delete t.fx,delete t.fy,M.r(this).classed("fixed",!1),M.r(this).style("fill",(function(){return l?M.l(Math.abs("loss"===j?(t.metric-c)/c:t.accuracy)):M.m(Math.abs("loss"===j?(t.metric-c)/c:t.accuracy))})),a.alpha(1).restart())}var m=function(e,t){for(var s=["gray","green","yellow","black","purple","pink","red","orange","brown","blue","cyan","magenta","lime","navy","olive","teal","violet","wheat"],a=[],c=0;c<D.length;c++){a=[];for(var i=0;i<G.length;i++)G[i].xFeature===D[c][0].split(", ")[0]&&(r<2||G[i].yFeature===D[c][0].split(", ")[1])&&(r<2?a.push([G[i].x,400]):a.push([G[i].x,G[i].y]));var n=M.o(a),l=M.n().curve(M.d);if(!n)return;e.append("path").attr("class","path".concat(r)).attr("d",l(n)).attr("fill",s[0]).attr("stroke",s[0]).attr("opacity",t)}};e.select(".x-axis-grid").call(X),e.select(".y-axis-grid").call(Y),e.select(".x-axis").call(W),r>=2?e.select(".y-axis").call(q).style("opacity","1"):e.select(".y-axis").style("opacity","0"),M.r(".switch").on("click",(function(e,t){f(e.target.checked),e.target.checked?M.r(".hull").style("opacity","0").call(m,.25).transition().duration(500).style("opacity","1"):(M.r(".hull").remove(),M.s(".hull").transition().duration(0).style("opacity","0"))}))}),[t,S]);return Object(h.jsxs)("div",{className:"graph",style:{overflow:"scroll"},children:[Object(h.jsx)("div",{className:"tooltip",style:{position:"absolute",background:"#e6e6e6",borderRadius:"20px",padding:"1rem"}}),Object(h.jsx)("svg",{id:"graph-svg",className:"svg",viewBox:"0 0 875 875",width:"80%",height:"80%",style:{margin:"0 auto",display:"block",height:"1000px"},children:Object(h.jsxs)("g",{transform:"translate(50, 0)",children:[Object(h.jsx)("g",{id:"graph-g",className:"g",transform:"translate(50, 200)"}),Object(h.jsx)("g",{className:"x-axis"}),Object(h.jsx)("g",{className:"y-axis"}),Object(h.jsx)("g",{className:"x-axis-grid"}),Object(h.jsx)("g",{className:"y-axis-grid"}),z.map((function(e){return Object(h.jsx)("g",{className:"hull"},e)}))]})}),Object(h.jsx)("br",{})]})}var _=Object(s.memo)(T),J=r(55),V=r(77),I=function(e){var t,r,s,a,c=e.numFeatures,i=e.sampleSize,n=e.metric,l=e.view,o=e.sortBy,u=e.overperforming,d=e.features,x=e.radius,m=e.edgeFiltering,j=e.edgeForce,g=e.setDetails,p=e.cursorMode,y=e.show,b=e.algorithm,O=e.setShowConvexHull,v=e.nodeSize,S=e.nodeColor;u?(t=Object.values(V.data).map((function(e){return Object.values(e)[0]})),r=Object.values(J.data).map((function(e){return Object.values(e)[0]})),s=V.model,a=J.model_accuracy):(t=Object.values(J.data).map((function(e){return Object.values(e)[0]})),r=Object.values(V.data).map((function(e){return Object.values(e)[0]})),s=J.model,a=J.model_accuracy);var z=t.map((function(e){return e.metric})),w=r.map((function(e){return e.metric})),k=Math.max.apply(Math,Object(f.a)(z).concat(Object(f.a)(w),[s])),F=t.filter((function(e){for(var t=e.slice;t.includes(":");){if(d.includes(t.substring(0,t.indexOf(":"))))return!0;t=t.substring(t.indexOf(":")+1)}return!1})).filter((function(e){return e.size>=i})).filter((function(e){return e.degree<=c})).sort((function(e,t){return"size"===o?t.size-e.size:"loss"===o?u?e.metric-t.metric:t.metric-e.metric:"accuracy"===o?u?t.accuracy-e.accuracy:e.accuracy-t.accuracy:u?e.metric-t.metric:t.metric-e.metric}));return F="bar"===l?F.slice(0,10):F.slice(0,y),Object(h.jsx)("div",{className:"main-container",style:{display:"block",margin:"auto",width:"75%"},children:"bar"===l?Object(h.jsx)(A,{data:F,model:s,max:k,view:l,overperforming:u,metric:n,accuracy:a,setDetails:g,nodeColor:S}):"force"===l?Object(h.jsx)(L,{data:F,degree:c,view:l,metric:n,model:s,accuracy:a,overperforming:u,setDetails:g,radius:x,setShowConvexHull:O,nodeSize:v,nodeColor:S}):Object(h.jsx)(_,{data:F,degree:c,metric:n,model:s,accuracy:a,overperforming:u,radiusType:x,edgeFiltering:m,edgeForce:j,setDetails:g,cursorMode:p,algorithm:b,setShowConvexHull:O,nodeSize:v,nodeColor:S})})},W=Object(s.memo)(I);window.onbeforeunload=function(){window.scrollTo(0,0)};var q=function(){var e=a.a.useState("slicefinder"),t=Object(n.a)(e,2),r=t[0],s=t[1],c=a.a.useState(2),i=Object(n.a)(c,2),l=i[0],o=i[1],u=a.a.useState(0),d=Object(n.a)(u,2),f=d[0],m=d[1],j=a.a.useState("Log Loss"),g=Object(n.a)(j,2),p=g[0],y=g[1],b=a.a.useState("force"),O=Object(n.a)(b,2),v=O[0],S=O[1],w=a.a.useState("loss"),k=Object(n.a)(w,2),M=k[0],C=k[1],N=a.a.useState(!1),A=Object(n.a)(N,2),D=A[0],L=A[1],E=a.a.useState("log"),B=Object(n.a)(E,2),H=B[0],R=B[1],T=a.a.useState(500),_=Object(n.a)(T,2),J=_[0],V=_[1],I=a.a.useState(1),q=Object(n.a)(I,2),X=(q[0],q[1],a.a.useState(1)),Y=Object(n.a)(X,2),G=Y[0],K=Y[1],P=a.a.useState("select"),Q=Object(n.a)(P,2),U=Q[0],Z=Q[1],$=a.a.useState(100),ee=Object(n.a)($,2),te=ee[0],re=ee[1],se=a.a.useState("size"),ae=Object(n.a)(se,2),ce=ae[0],ie=ae[1],ne=a.a.useState("loss"),le=Object(n.a)(ne,2),oe=le[0],ue=le[1],de=a.a.useState(z.features),he=Object(n.a)(de,2),xe=he[0],fe=he[1],me=a.a.useState(null),je=Object(n.a)(me,2),ge=(je[0],je[1]),pe=a.a.useCallback((function(e){ge(e)}),[]),ye=a.a.useState(!1),be=Object(n.a)(ye,2),Oe=be[0],ve=be[1];return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(x,{view:v,setView:S,algorithm:r,setAlgorithm:s}),Object(h.jsx)(F,{numFeatures:l,setNumFeatures:o,sampleSize:f,setSampleSize:m,metric:p,setMetric:y,sortBy:M,setSortBy:C,overperforming:D,setOverperforming:L,features:xe,setFeatures:fe,view:v,radius:H,setRadius:R,edgeFiltering:J,setEdgeFiltering:V,edgeForce:G,setEdgeForce:K,cursorMode:U,setCursorMode:Z,show:te,setShow:re,nodeSize:ce,setNodeSize:ie,nodeColor:oe,setNodeColor:ue,showConvexHull:Oe,setShowConvexHull:ve}),Object(h.jsx)(W,{numFeatures:l,sampleSize:f,metric:p,view:v,sortBy:M,overperforming:D,features:xe,radius:H,edgeFiltering:J,edgeForce:G,setDetails:pe,cursorMode:U,show:te,algorithm:r,setShowConvexHull:ve,nodeSize:ce,nodeColor:oe})]})};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(q,{})}),document.getElementById("root"))},55:function(e){e.exports=JSON.parse('{"model":"insert log loss slices","data":"insert log loss slices"}')},64:function(e){e.exports=JSON.parse('{"features":["insert dataset features"]}')},77:function(e){e.exports=JSON.parse('{"model":"insert reverse log loss slices","data":"insert reverse log loss slices"}')},95:function(e){e.exports=JSON.parse('{"data":"insert log loss samples"}')},96:function(e){e.exports=JSON.parse('{"data":"insert reverse log loss samples"}')}},[[253,1,2]]]);
//# sourceMappingURL=main.0cf4dbb4.chunk.js.map