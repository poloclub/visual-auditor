{"ast":null,"code":"import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function (links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map(function (d, i) {\n      return [id(d, i, nodes), d];\n    })),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function (_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function (_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function (_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function (_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function (_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function (_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}","map":{"version":3,"sources":["/Users/davidmunechika/Documents/Code/visual-auditor/node_modules/d3-force/src/link.js"],"names":["constant","jiggle","index","d","find","nodeById","nodeId","node","get","Error","links","id","strength","defaultStrength","strengths","distance","distances","nodes","count","bias","random","iterations","link","Math","min","source","target","force","alpha","k","n","length","i","x","y","l","b","vx","vy","sqrt","initialize","m","Map","map","Array","initializeStrength","initializeDistance","_nodes","_random","_","arguments"],"mappings":"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","sourcesContent":["import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n"]},"metadata":{},"sourceType":"module"}