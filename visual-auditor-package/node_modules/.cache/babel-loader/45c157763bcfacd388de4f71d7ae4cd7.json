{"ast":null,"code":"import _slicedToArray from\"/Users/davidmunechika/Documents/Code/visual-auditor/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useD3}from'../../hooks/useD3';import React from'react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SliceBarChart(_ref){var data=_ref.data;var _React$useState=React.useState('steelBlue'),_React$useState2=_slicedToArray(_React$useState,2),fillColor=_React$useState2[0],setFillColor=_React$useState2[1];var ref=useD3(function(svg){var height=600;var width=875;var margin={top:20,right:30,bottom:50,left:40};var x=d3.scaleBand().domain(data.map(function(d){return d.slice;})).rangeRound([margin.left,width-margin.right]).padding(0.1);var y1=d3.scaleLinear().domain([0,d3.max(data,function(d){return d.metric;})]).rangeRound([height-margin.bottom,margin.top]);var xAxis=function xAxis(g){return g.attr('transform',\"translate(0,\".concat(height-margin.bottom,\")\")).call(d3.axisBottom(x).tickSizeOuter(0)).selectAll('text').attr('transform','translate(-10,0)rotate(-45)').style('text-anchor','end');};var y1Axis=function y1Axis(g){return g.attr('transform',\"translate(\".concat(margin.left,\",0)\")).style('color','steelblue').call(d3.axisLeft(y1).ticks(null,'s')).call(function(g){return g.select('.domain').remove();}).call(function(g){return g.append('text').attr('x',-margin.left).attr('y',10).attr('fill','currentColor').attr('text-anchor','start').text(data.y1);});};svg.select('.x-axis').call(xAxis);svg.select('.y-axis').call(y1Axis);svg.select('.plot-area').selectAll('.bar').data(data).join('rect').attr('class','bar').style('fill',fillColor).on('mouseover',function(d){setFillColor('black');d3.select(this).attr('fill','black');console.log('over');}).on('mouseout',function(d){setFillColor('steelBlue');console.log('out');}).attr('x',function(d){return x(d.slice);}).attr('width',x.bandwidth()).attr('y',function(d){return y1(0)-margin.bottom;}).attr('height',function(d){return height-y1(0);});// Animation\nsvg.selectAll('rect').transition().duration(800).attr('y',function(d){return y1(d.metric)-margin.bottom;}).attr('height',function(d){return height-y1(d.metric);}).delay(function(d,i){console.log(i);return i*100;});},[data.length]);return/*#__PURE__*/_jsxs(\"svg\",{ref:ref,style:{height:700,width:'60%',margin:'auto',display:'block'},children:[/*#__PURE__*/_jsx(\"g\",{className:\"plot-area\"}),/*#__PURE__*/_jsx(\"g\",{className:\"x-axis\"}),/*#__PURE__*/_jsx(\"g\",{className:\"y-axis\"})]});}export default SliceBarChart;","map":{"version":3,"sources":["/Users/davidmunechika/Documents/Code/visual-auditor/src/components/Main/SliceBarChart.js"],"names":["useD3","React","d3","SliceBarChart","data","useState","fillColor","setFillColor","ref","svg","height","width","margin","top","right","bottom","left","x","scaleBand","domain","map","d","slice","rangeRound","padding","y1","scaleLinear","max","metric","xAxis","g","attr","call","axisBottom","tickSizeOuter","selectAll","style","y1Axis","axisLeft","ticks","select","remove","append","text","join","on","console","log","bandwidth","transition","duration","delay","i","length","display"],"mappings":"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","sourcesContent":["import { useD3 } from '../../hooks/useD3';\nimport React from 'react';\nimport * as d3 from 'd3';\n\nfunction SliceBarChart({ data }) {\n  const [fillColor, setFillColor] = React.useState('steelBlue');\n  const ref = useD3(\n    (svg) => {\n      const height = 600;\n      const width = 875;\n      const margin = { top: 20, right: 30, bottom: 50, left: 40 };\n\n      const x = d3\n        .scaleBand()\n        .domain(data.map((d) => d.slice))\n        .rangeRound([margin.left, width - margin.right])\n        .padding(0.1);\n\n      const y1 = d3\n        .scaleLinear()\n        .domain([0, d3.max(data, (d) => d.metric)])\n        .rangeRound([height - margin.bottom, margin.top]);\n\n      const xAxis = (g) =>\n        g\n          .attr('transform', `translate(0,${height - margin.bottom})`)\n          .call(d3.axisBottom(x).tickSizeOuter(0))\n          .selectAll('text')\n          .attr('transform', 'translate(-10,0)rotate(-45)')\n          .style('text-anchor', 'end');\n\n      const y1Axis = (g) =>\n        g\n          .attr('transform', `translate(${margin.left},0)`)\n          .style('color', 'steelblue')\n          .call(d3.axisLeft(y1).ticks(null, 's'))\n          .call((g) => g.select('.domain').remove())\n          .call((g) =>\n            g\n              .append('text')\n              .attr('x', -margin.left)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(data.y1)\n          );\n\n      svg.select('.x-axis').call(xAxis);\n      svg.select('.y-axis').call(y1Axis);\n\n      svg\n        .select('.plot-area')\n        .selectAll('.bar')\n        .data(data)\n        .join('rect')\n        .attr('class', 'bar')\n        .style('fill', fillColor)\n        .on('mouseover', function (d) {\n          setFillColor('black');\n          d3.select(this).attr('fill', 'black');\n          console.log('over');\n        })\n        .on('mouseout', function (d) {\n          setFillColor('steelBlue');\n          console.log('out');\n        })\n        .attr('x', (d) => x(d.slice))\n        .attr('width', x.bandwidth())\n        .attr('y', (d) => y1(0) - margin.bottom)\n        .attr('height', (d) => height - y1(0));\n\n      // Animation\n      svg\n        .selectAll('rect')\n        .transition()\n        .duration(800)\n        .attr('y', function (d) {\n          return y1(d.metric) - margin.bottom;\n        })\n        .attr('height', function (d) {\n          return height - y1(d.metric);\n        })\n        .delay(function (d, i) {\n          console.log(i);\n          return i * 100;\n        });\n    },\n    [data.length]\n  );\n\n  return (\n    <svg\n      ref={ref}\n      style={{\n        height: 700,\n        width: '60%',\n        margin: 'auto',\n        display: 'block',\n      }}\n    >\n      <g className='plot-area' />\n      <g className='x-axis' />\n      <g className='y-axis' />\n    </svg>\n  );\n}\n\nexport default SliceBarChart;\n"]},"metadata":{},"sourceType":"module"}