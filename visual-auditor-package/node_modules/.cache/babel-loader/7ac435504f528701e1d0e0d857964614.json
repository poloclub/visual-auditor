{"ast":null,"code":"import { path } from \"d3-path\";\nimport { slice } from \"./array.js\";\nimport constant from \"./constant.js\";\nimport { abs, cos, epsilon, halfPi, sin } from \"./math.js\";\n\nfunction defaultSource(d) {\n  return d.source;\n}\n\nfunction defaultTarget(d) {\n  return d.target;\n}\n\nfunction defaultRadius(d) {\n  return d.radius;\n}\n\nfunction defaultStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction defaultEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction defaultPadAngle() {\n  return 0;\n}\n\nfunction defaultArrowheadRadius() {\n  return 10;\n}\n\nfunction ribbon(headRadius) {\n  var source = defaultSource,\n      target = defaultTarget,\n      sourceRadius = defaultRadius,\n      targetRadius = defaultRadius,\n      startAngle = defaultStartAngle,\n      endAngle = defaultEndAngle,\n      padAngle = defaultPadAngle,\n      context = null;\n\n  function ribbon() {\n    var buffer,\n        s = source.apply(this, arguments),\n        t = target.apply(this, arguments),\n        ap = padAngle.apply(this, arguments) / 2,\n        argv = slice.call(arguments),\n        sr = +sourceRadius.apply(this, (argv[0] = s, argv)),\n        sa0 = startAngle.apply(this, argv) - halfPi,\n        sa1 = endAngle.apply(this, argv) - halfPi,\n        tr = +targetRadius.apply(this, (argv[0] = t, argv)),\n        ta0 = startAngle.apply(this, argv) - halfPi,\n        ta1 = endAngle.apply(this, argv) - halfPi;\n    if (!context) context = buffer = path();\n\n    if (ap > epsilon) {\n      if (abs(sa1 - sa0) > ap * 2 + epsilon) sa1 > sa0 ? (sa0 += ap, sa1 -= ap) : (sa0 -= ap, sa1 += ap);else sa0 = sa1 = (sa0 + sa1) / 2;\n      if (abs(ta1 - ta0) > ap * 2 + epsilon) ta1 > ta0 ? (ta0 += ap, ta1 -= ap) : (ta0 -= ap, ta1 += ap);else ta0 = ta1 = (ta0 + ta1) / 2;\n    }\n\n    context.moveTo(sr * cos(sa0), sr * sin(sa0));\n    context.arc(0, 0, sr, sa0, sa1);\n\n    if (sa0 !== ta0 || sa1 !== ta1) {\n      if (headRadius) {\n        var hr = +headRadius.apply(this, arguments),\n            tr2 = tr - hr,\n            ta2 = (ta0 + ta1) / 2;\n        context.quadraticCurveTo(0, 0, tr2 * cos(ta0), tr2 * sin(ta0));\n        context.lineTo(tr * cos(ta2), tr * sin(ta2));\n        context.lineTo(tr2 * cos(ta1), tr2 * sin(ta1));\n      } else {\n        context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\n        context.arc(0, 0, tr, ta0, ta1);\n      }\n    }\n\n    context.quadraticCurveTo(0, 0, sr * cos(sa0), sr * sin(sa0));\n    context.closePath();\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  if (headRadius) ribbon.headRadius = function (_) {\n    return arguments.length ? (headRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : headRadius;\n  };\n\n  ribbon.radius = function (_) {\n    return arguments.length ? (sourceRadius = targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.sourceRadius = function (_) {\n    return arguments.length ? (sourceRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.targetRadius = function (_) {\n    return arguments.length ? (targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : targetRadius;\n  };\n\n  ribbon.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\n  };\n\n  ribbon.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\n  };\n\n  ribbon.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : padAngle;\n  };\n\n  ribbon.source = function (_) {\n    return arguments.length ? (source = _, ribbon) : source;\n  };\n\n  ribbon.target = function (_) {\n    return arguments.length ? (target = _, ribbon) : target;\n  };\n\n  ribbon.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, ribbon) : context;\n  };\n\n  return ribbon;\n}\n\nexport default function () {\n  return ribbon();\n}\nexport function ribbonArrow() {\n  return ribbon(defaultArrowheadRadius);\n}","map":{"version":3,"sources":["/Users/davidmunechika/Documents/Code/Research/visual-auditor/node_modules/d3-chord/src/ribbon.js"],"names":["path","slice","constant","abs","cos","epsilon","halfPi","sin","defaultSource","d","source","defaultTarget","target","defaultRadius","radius","defaultStartAngle","startAngle","defaultEndAngle","endAngle","defaultPadAngle","defaultArrowheadRadius","ribbon","headRadius","sourceRadius","targetRadius","padAngle","context","buffer","s","apply","arguments","t","ap","argv","call","sr","sa0","sa1","tr","ta0","ta1","moveTo","arc","hr","tr2","ta2","quadraticCurveTo","lineTo","closePath","_","length","ribbonArrow"],"mappings":"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","sourcesContent":["import {path} from \"d3-path\";\nimport {slice} from \"./array.js\";\nimport constant from \"./constant.js\";\nimport {abs, cos, epsilon, halfPi, sin} from \"./math.js\";\n\nfunction defaultSource(d) {\n  return d.source;\n}\n\nfunction defaultTarget(d) {\n  return d.target;\n}\n\nfunction defaultRadius(d) {\n  return d.radius;\n}\n\nfunction defaultStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction defaultEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction defaultPadAngle() {\n  return 0;\n}\n\nfunction defaultArrowheadRadius() {\n  return 10;\n}\n\nfunction ribbon(headRadius) {\n  var source = defaultSource,\n      target = defaultTarget,\n      sourceRadius = defaultRadius,\n      targetRadius = defaultRadius,\n      startAngle = defaultStartAngle,\n      endAngle = defaultEndAngle,\n      padAngle = defaultPadAngle,\n      context = null;\n\n  function ribbon() {\n    var buffer,\n        s = source.apply(this, arguments),\n        t = target.apply(this, arguments),\n        ap = padAngle.apply(this, arguments) / 2,\n        argv = slice.call(arguments),\n        sr = +sourceRadius.apply(this, (argv[0] = s, argv)),\n        sa0 = startAngle.apply(this, argv) - halfPi,\n        sa1 = endAngle.apply(this, argv) - halfPi,\n        tr = +targetRadius.apply(this, (argv[0] = t, argv)),\n        ta0 = startAngle.apply(this, argv) - halfPi,\n        ta1 = endAngle.apply(this, argv) - halfPi;\n\n    if (!context) context = buffer = path();\n\n    if (ap > epsilon) {\n      if (abs(sa1 - sa0) > ap * 2 + epsilon) sa1 > sa0 ? (sa0 += ap, sa1 -= ap) : (sa0 -= ap, sa1 += ap);\n      else sa0 = sa1 = (sa0 + sa1) / 2;\n      if (abs(ta1 - ta0) > ap * 2 + epsilon) ta1 > ta0 ? (ta0 += ap, ta1 -= ap) : (ta0 -= ap, ta1 += ap);\n      else ta0 = ta1 = (ta0 + ta1) / 2;\n    }\n\n    context.moveTo(sr * cos(sa0), sr * sin(sa0));\n    context.arc(0, 0, sr, sa0, sa1);\n    if (sa0 !== ta0 || sa1 !== ta1) {\n      if (headRadius) {\n        var hr = +headRadius.apply(this, arguments), tr2 = tr - hr, ta2 = (ta0 + ta1) / 2;\n        context.quadraticCurveTo(0, 0, tr2 * cos(ta0), tr2 * sin(ta0));\n        context.lineTo(tr * cos(ta2), tr * sin(ta2));\n        context.lineTo(tr2 * cos(ta1), tr2 * sin(ta1));\n      } else {\n        context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\n        context.arc(0, 0, tr, ta0, ta1);\n      }\n    }\n    context.quadraticCurveTo(0, 0, sr * cos(sa0), sr * sin(sa0));\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  if (headRadius) ribbon.headRadius = function(_) {\n    return arguments.length ? (headRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : headRadius;\n  };\n\n  ribbon.radius = function(_) {\n    return arguments.length ? (sourceRadius = targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.sourceRadius = function(_) {\n    return arguments.length ? (sourceRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : sourceRadius;\n  };\n\n  ribbon.targetRadius = function(_) {\n    return arguments.length ? (targetRadius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : targetRadius;\n  };\n\n  ribbon.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\n  };\n\n  ribbon.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\n  };\n\n  ribbon.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : padAngle;\n  };\n\n  ribbon.source = function(_) {\n    return arguments.length ? (source = _, ribbon) : source;\n  };\n\n  ribbon.target = function(_) {\n    return arguments.length ? (target = _, ribbon) : target;\n  };\n\n  ribbon.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), ribbon) : context;\n  };\n\n  return ribbon;\n}\n\nexport default function() {\n  return ribbon();\n}\n\nexport function ribbonArrow() {\n  return ribbon(defaultArrowheadRadius);\n}\n"]},"metadata":{},"sourceType":"module"}