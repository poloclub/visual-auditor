{"ast":null,"code":"var _jsxFileName = \"/Users/davidmunechika/Documents/Code/visual-auditor/src/components/Main/SliceBarChart.js\",\n    _s = $RefreshSig$();\n\nimport { useD3 } from '../../hooks/useD3';\nimport React from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction SliceBarChart({\n  data,\n  model\n}) {\n  _s();\n\n  const [fillColor, setFillColor] = React.useState('steelBlue');\n  const ref = useD3(svg => {\n    const height = 600;\n    const width = 875;\n    const margin = {\n      top: 20,\n      right: 30,\n      bottom: 50,\n      left: 40\n    };\n    const x = d3.scaleBand().domain(data.map(d => d.slice)).rangeRound([margin.left, width - margin.right]).padding(0.1);\n    const y1 = d3.scaleLinear().range([0, 1]).domain([0, d3.max(data, d => d.metric)]);\n\n    const xAxis = g => g.attr('transform', `translate(0,${height - margin.bottom})`).call(d3.axisBottom(x).tickSizeOuter(0)).selectAll('text').attr('transform', 'translate(-10,0)rotate(-45)').style('text-anchor', 'end');\n\n    const y1Axis = g => g.attr('transform', `translate(${margin.left},0)`).style('color', 'steelblue').call(d3.axisLeft(y1).ticks(null, 's')).call(g => g.select('.domain').remove()).call(g => g.append('text').attr('x', -margin.left).attr('y', 10).attr('fill', 'currentColor').attr('text-anchor', 'start').text(data.y1));\n\n    svg.select('.x-axis').call(xAxis);\n    svg.select('.y-axis').call(y1Axis);\n    svg.select('.plot-area').selectAll('.bar').data(data).join('rect').attr('class', 'bar').style('fill', fillColor).on('mouseover', function (d) {\n      setFillColor('black');\n      d3.select(this).attr('fill', 'black');\n      console.log('over');\n    }).on('mouseout', function (d) {\n      setFillColor('steelBlue');\n      console.log('out');\n    }).attr('x', d => x(d.slice)).attr('width', x.bandwidth()).attr('y', d => y1(0) - margin.bottom).attr('height', d => height - y1(0)); // Animation\n\n    svg.selectAll('rect').transition().duration(800).attr('y', function (d) {\n      return y1(d.metric) - margin.bottom;\n    }).attr('height', function (d) {\n      return height - y1(d.metric);\n    }).delay(function (d, i) {\n      console.log(i);\n      return i * 100;\n    });\n    svg.append('svg:line').attr('x1', 0).attr('x2', width).attr('y1', y1(model)).attr('y2', y1(model)).style('stroke', 'rgb(26, 214, 249)');\n    svg.append('svg:line').attr('x1', 0).attr('x2', width).attr('y1', y1(model)).attr('y2', y1(model)).style('stroke', 'rgb(26, 214, 249)');\n  }, [data.length]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: ref,\n    style: {\n      height: 700,\n      width: '60%',\n      margin: 'auto',\n      display: 'block'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"g\", {\n      className: \"plot-area\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n      className: \"x-axis\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n      className: \"y-axis\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SliceBarChart, \"6O6d/nrzq4jdTyyAKaaJPYJjDdo=\", false, function () {\n  return [useD3];\n});\n\n_c = SliceBarChart;\nexport default SliceBarChart;\n\nvar _c;\n\n$RefreshReg$(_c, \"SliceBarChart\");","map":{"version":3,"sources":["/Users/davidmunechika/Documents/Code/visual-auditor/src/components/Main/SliceBarChart.js"],"names":["useD3","React","d3","SliceBarChart","data","model","fillColor","setFillColor","useState","ref","svg","height","width","margin","top","right","bottom","left","x","scaleBand","domain","map","d","slice","rangeRound","padding","y1","scaleLinear","range","max","metric","xAxis","g","attr","call","axisBottom","tickSizeOuter","selectAll","style","y1Axis","axisLeft","ticks","select","remove","append","text","join","on","console","log","bandwidth","transition","duration","delay","i","length","display"],"mappings":"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","sourcesContent":["import { useD3 } from '../../hooks/useD3';\nimport React from 'react';\nimport * as d3 from 'd3';\n\nfunction SliceBarChart({ data, model }) {\n  const [fillColor, setFillColor] = React.useState('steelBlue');\n  const ref = useD3(\n    (svg) => {\n      const height = 600;\n      const width = 875;\n      const margin = { top: 20, right: 30, bottom: 50, left: 40 };\n\n      const x = d3\n        .scaleBand()\n        .domain(data.map((d) => d.slice))\n        .rangeRound([margin.left, width - margin.right])\n        .padding(0.1);\n\n      const y1 = d3\n        .scaleLinear()\n        .range([0, 1])\n        .domain([0, d3.max(data, (d) => d.metric)]);\n\n      const xAxis = (g) =>\n        g\n          .attr('transform', `translate(0,${height - margin.bottom})`)\n          .call(d3.axisBottom(x).tickSizeOuter(0))\n          .selectAll('text')\n          .attr('transform', 'translate(-10,0)rotate(-45)')\n          .style('text-anchor', 'end');\n\n      const y1Axis = (g) =>\n        g\n          .attr('transform', `translate(${margin.left},0)`)\n          .style('color', 'steelblue')\n          .call(d3.axisLeft(y1).ticks(null, 's'))\n          .call((g) => g.select('.domain').remove())\n          .call((g) =>\n            g\n              .append('text')\n              .attr('x', -margin.left)\n              .attr('y', 10)\n              .attr('fill', 'currentColor')\n              .attr('text-anchor', 'start')\n              .text(data.y1)\n          );\n\n      svg.select('.x-axis').call(xAxis);\n      svg.select('.y-axis').call(y1Axis);\n\n      svg\n        .select('.plot-area')\n        .selectAll('.bar')\n        .data(data)\n        .join('rect')\n        .attr('class', 'bar')\n        .style('fill', fillColor)\n        .on('mouseover', function (d) {\n          setFillColor('black');\n          d3.select(this).attr('fill', 'black');\n          console.log('over');\n        })\n        .on('mouseout', function (d) {\n          setFillColor('steelBlue');\n          console.log('out');\n        })\n        .attr('x', (d) => x(d.slice))\n        .attr('width', x.bandwidth())\n        .attr('y', (d) => y1(0) - margin.bottom)\n        .attr('height', (d) => height - y1(0));\n\n      // Animation\n      svg\n        .selectAll('rect')\n        .transition()\n        .duration(800)\n        .attr('y', function (d) {\n          return y1(d.metric) - margin.bottom;\n        })\n        .attr('height', function (d) {\n          return height - y1(d.metric);\n        })\n        .delay(function (d, i) {\n          console.log(i);\n          return i * 100;\n        });\n\n      svg\n        .append('svg:line')\n        .attr('x1', 0)\n        .attr('x2', width)\n        .attr('y1', y1(model))\n        .attr('y2', y1(model))\n        .style('stroke', 'rgb(26, 214, 249)');\n\n      svg\n        .append('svg:line')\n        .attr('x1', 0)\n        .attr('x2', width)\n        .attr('y1', y1(model))\n        .attr('y2', y1(model))\n        .style('stroke', 'rgb(26, 214, 249)');\n    },\n    [data.length]\n  );\n\n  return (\n    <svg\n      ref={ref}\n      style={{\n        height: 700,\n        width: '60%',\n        margin: 'auto',\n        display: 'block',\n      }}\n    >\n      <g className='plot-area' />\n      <g className='x-axis' />\n      <g className='y-axis' />\n    </svg>\n  );\n}\n\nexport default SliceBarChart;\n"]},"metadata":{},"sourceType":"module"}